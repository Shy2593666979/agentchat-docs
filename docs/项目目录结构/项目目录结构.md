# AgentChaté¡¹ç›®ç›®å½•ç»“æ„å…¨é¢è§£æ

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](https://github.com/Shy2593666979/AgentChat/README.md)
- [docker/Dockerfile](https://github.com/Shy2593666979/AgentChat/docker/Dockerfile)
- [docker/docker-compose.yml](https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml)
- [scripts/start.py](https://github.com/Shy2593666979/AgentChat/scripts/start.py)
- [scripts/fix_fastapi_jwt_auth.py](https://github.com/Shy2593666979/AgentChat/scripts/fix_fastapi_jwt_auth.py)
- [src/backend/agentchat/main.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py)
- [src/backend/agentchat/api/router.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py)
- [src/backend/agentchat/settings.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/settings.py)
- [src/backend/agentchat/core/models/manager.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/core/models/manager.py)
- [src/backend/agentchat/database/session.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/database/session.py)
- [src/backend/agentchat/tools/__init__.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/tools/__init__.py)
- [src/frontend/src/main.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/main.ts)
- [src/frontend/src/router/index.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/router/index.ts)
- [src/frontend/src/store/user/index.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/store/user/index.ts)
- [src/backend/agentchat/api/v1/chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py)
</cite>

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ ¹ç›®å½•ç»“æ„](#æ ¹ç›®å½•ç»“æ„)
3. [Dockerå®¹å™¨åŒ–é…ç½®](#dockerå®¹å™¨åŒ–é…ç½®)
4. [è„šæœ¬å·¥å…·é›†](#è„šæœ¬å·¥å…·é›†)
5. [åç«¯æ¶æ„è¯¦è§£](#åç«¯æ¶æ„è¯¦è§£)
6. [å‰ç«¯æ¶æ„è¯¦è§£](#å‰ç«¯æ¶æ„è¯¦è§£)
7. [æ ¸å¿ƒæ¨¡å—åŠŸèƒ½è¾¹ç•Œ](#æ ¸å¿ƒæ¨¡å—åŠŸèƒ½è¾¹ç•Œ)
8. [ä»£ç æ‰§è¡Œæµç¨‹](#ä»£ç æ‰§è¡Œæµç¨‹)
9. [éƒ¨ç½²ä¸å¯åŠ¨æŒ‡å—](#éƒ¨ç½²ä¸å¯åŠ¨æŒ‡å—)
10. [æ€»ç»“](#æ€»ç»“)

## é¡¹ç›®æ¦‚è¿°

AgentChatæ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿï¼ŒåŸºäºå¤§è¯­è¨€æ¨¡å‹æ„å»ºï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚é¡¹ç›®æ”¯æŒå¤šAgentåä½œã€çŸ¥è¯†åº“æ£€ç´¢ã€å·¥å…·è°ƒç”¨ã€MCPæœåŠ¡å™¨é›†æˆç­‰é«˜çº§åŠŸèƒ½ï¼Œå…·æœ‰å®Œæ•´çš„å®¹å™¨åŒ–éƒ¨ç½²èƒ½åŠ›å’Œä¸°å¯Œçš„åŠŸèƒ½æ¨¡å—ã€‚

**é¡¹ç›®ç‰¹è‰²ï¼š**
- ğŸ¤– **å¤šæ¨¡å‹æ”¯æŒ**ï¼šé›†æˆOpenAIã€DeepSeekã€Qwenç­‰ä¸»æµå¤§è¯­è¨€æ¨¡å‹
- ğŸ§  **æ™ºèƒ½Agent**ï¼šæ”¯æŒå¤šAgentåä½œï¼Œå…·å¤‡æ¨ç†å’Œå†³ç­–èƒ½åŠ›
- ğŸ“š **çŸ¥è¯†åº“æ£€ç´¢**ï¼šRAGæŠ€æœ¯å®ç°ç²¾å‡†çŸ¥è¯†æ£€ç´¢å’Œé—®ç­”
- ğŸ”§ **å·¥å…·ç”Ÿæ€**ï¼šå†…ç½®å¤šç§å®ç”¨å·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•
- ğŸŒ **MCPé›†æˆ**ï¼šæ”¯æŒModel Context ProtocolæœåŠ¡å™¨
- ğŸ’¬ **å®æ—¶å¯¹è¯**ï¼šæµå¼å“åº”ï¼Œæä¾›æµç•…çš„å¯¹è¯ä½“éªŒ

## æ ¹ç›®å½•ç»“æ„

```mermaid
graph TD
Root[AgentChat æ ¹ç›®å½•] --> Docker[docker/]
Root --> Scripts[scripts/]
Root --> Src[src/]
Root --> Docs[docs/]
Root --> README[README.md]
Root --> PyProject[pyproject.toml]
Docker --> Dockerfile[Dockerfile]
Docker --> DockerCompose[docker-compose.yml]
Docker --> NginxConf[nginx.conf]
Docker --> StartScript[start.sh]
Docker --> StopScript[stop.sh]
Scripts --> StartPy[start.py]
Scripts --> FixAuth[fix_fastapi_jwt_auth.py]
Scripts --> ReadmeScript[README.md]
Src --> Backend[backend/]
Src --> Frontend[frontend/]
Backend --> AgentChat[agentchat/]
Frontend --> SrcDir[src/]
Docs --> APIDoc[API_Documentation_v3.0.md]
Docs --> Migration[migration.md]
```

**å›¾è¡¨æ¥æº**
- [README.md](https://github.com/Shy2593666979/AgentChat/README.md#L360-L506)
- [docker/Dockerfile](https://github.com/Shy2593666979/AgentChat/docker/Dockerfile#L1-L39)
- [scripts/start.py](https://github.com/Shy2593666979/AgentChat/scripts/start.py#L1-L125)

**ç« èŠ‚æ¥æº**
- [README.md](https://github.com/Shy2593666979/AgentChat/README.md#L360-L506)

## Dockerå®¹å™¨åŒ–é…ç½®

### Dockerfileé…ç½®

Dockerfileè´Ÿè´£æ„å»ºåç«¯æœåŠ¡çš„åŸºç¡€é•œåƒï¼ŒåŒ…å«Python 3.12ç¯å¢ƒã€ç³»ç»Ÿä¾èµ–å’Œé¡¹ç›®ä»£ç ã€‚

**ä¸»è¦ç‰¹æ€§ï¼š**
- åŸºäºPython 3.12-slimé•œåƒ
- å®‰è£…å¿…è¦çš„ç³»ç»Ÿä¾èµ–ï¼ˆgccã€g++ã€curlã€gitï¼‰
- é…ç½®å·¥ä½œç›®å½•å’Œç¯å¢ƒå˜é‡
- é›†æˆFastAPI-JWT-Authå…¼å®¹æ€§ä¿®å¤
- æš´éœ²7860ç«¯å£ä¾›FastAPIæœåŠ¡ä½¿ç”¨

### Docker Composeç¼–æ’

docker-compose.ymlå®šä¹‰äº†å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„ï¼š

```mermaid
graph TB
subgraph "Dockerç½‘ç»œ: agentchat-network"
MySQL[(MySQL 8.0<br/>3306ç«¯å£)]
Redis[(Redis 7.0<br/>6379ç«¯å£)]
Backend[åç«¯æœåŠ¡<br/>7860ç«¯å£]
Frontend[å‰ç«¯æœåŠ¡<br/>8090ç«¯å£]
end
MySQL --> Backend
Redis --> Backend
Backend --> Frontend
subgraph "å¥åº·æ£€æŸ¥"
HealthMySQL[MySQLå¥åº·æ£€æŸ¥]
HealthRedis[Rediså¥åº·æ£€æŸ¥]
HealthBackend[åç«¯å¥åº·æ£€æŸ¥]
HealthFrontend[å‰ç«¯å¥åº·æ£€æŸ¥]
end
HealthMySQL -.-> MySQL
HealthRedis -.-> Redis
HealthBackend -.-> Backend
HealthFrontend -.-> Frontend
```

**å›¾è¡¨æ¥æº**
- [docker/docker-compose.yml](https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L1-L126)

**ç« èŠ‚æ¥æº**
- [docker/Dockerfile](https://github.com/Shy2593666979/AgentChat/docker/Dockerfile#L1-L39)
- [docker/docker-compose.yml](https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L1-L126)

## è„šæœ¬å·¥å…·é›†

### å¯åŠ¨è„šæœ¬ï¼ˆstart.pyï¼‰

start.pyæä¾›äº†å®Œæ•´çš„é¡¹ç›®å¯åŠ¨æµç¨‹ï¼Œæ”¯æŒä¾èµ–å®‰è£…å’Œå‰åç«¯æœåŠ¡å¹¶å‘å¯åŠ¨ã€‚

**å¯åŠ¨æµç¨‹ï¼š**
1. **ä¾èµ–æ£€æµ‹**ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•æŸ¥æ‰¾requirements.txtæ–‡ä»¶
2. **ä¾èµ–å®‰è£…**ï¼šä½¿ç”¨pipå®‰è£…Pythonä¾èµ–åŒ…
3. **æœåŠ¡å¯åŠ¨**ï¼š
   - åç«¯æœåŠ¡ï¼šåœ¨src/backendç›®å½•ä¸‹å¯åŠ¨FastAPIåº”ç”¨
   - å‰ç«¯æœåŠ¡ï¼šåœ¨src/frontendç›®å½•ä¸‹å¯åŠ¨Viteå¼€å‘æœåŠ¡å™¨

### JWTè®¤è¯ä¿®å¤è„šæœ¬ï¼ˆfix_fastapi_jwt_auth.pyï¼‰

è§£å†³fastapi-jwt-authåº“ä¸Pydantic 2.xç‰ˆæœ¬çš„å…¼å®¹æ€§é—®é¢˜ã€‚

**ä¿®å¤å†…å®¹ï¼š**
- æ›¿æ¢æ—§ç‰ˆPydanticå­—æ®µç±»å‹ä¸ºPydantic 2å…¼å®¹ç‰ˆæœ¬
- æ·»åŠ StrictBoolã€StrictIntã€StrictStrç­‰ä¸¥æ ¼ç±»å‹
- æ›´æ–°éªŒè¯å™¨å‡½æ•°å’Œé…ç½®ç±»ç»“æ„
- æä¾›è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤æœºåˆ¶

**ç« èŠ‚æ¥æº**
- [scripts/start.py](https://github.com/Shy2593666979/AgentChat/scripts/start.py#L1-L125)
- [scripts/fix_fastapi_jwt_auth.py](https://github.com/Shy2593666979/AgentChat/scripts/fix_fastapi_jwt_auth.py#L1-L196)

## åç«¯æ¶æ„è¯¦è§£

### æ•´ä½“æ¶æ„

```mermaid
graph TB
subgraph "åç«¯æ ¸å¿ƒæ¨¡å—"
Main[main.py<br/>åº”ç”¨å…¥å£]
Router[router.py<br/>è·¯ç”±æ³¨å†Œ]
Settings[settings.py<br/>é…ç½®ç®¡ç†]
subgraph "APIå±‚"
V1[v1/ APIç‰ˆæœ¬]
Services[services/<br/>ä¸šåŠ¡æœåŠ¡]
ErrCode[errcode/<br/>é”™è¯¯ç ]
end
subgraph "æ ¸å¿ƒå±‚"
Core[core/<br/>æ ¸å¿ƒé€»è¾‘]
Models[models/<br/>AIæ¨¡å‹]
Agents[agents/<br/>æ™ºèƒ½ä½“]
end
subgraph "æ•°æ®å±‚"
Database[database/<br/>æ•°æ®è®¿é—®]
DAO[dao/<br/>æ•°æ®è®¿é—®å¯¹è±¡]
ModelsDB[models/<br/>æ•°æ®æ¨¡å‹]
end
subgraph "ä¸šåŠ¡å±‚"
MCP[mcp_servers/<br/>MCPæ’ä»¶]
Tools[tools/<br/>å·¥å…·é›†æˆ]
ServicesLayer[services/<br/>ä¸šåŠ¡æœåŠ¡]
end
end
Main --> Router
Router --> V1
V1 --> Services
Services --> Core
Core --> Models
Models --> Agents
Services --> Database
Database --> DAO
DAO --> ModelsDB
Services --> MCP
Services --> Tools
```

**å›¾è¡¨æ¥æº**
- [src/backend/agentchat/main.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py#L1-L108)
- [src/backend/agentchat/api/router.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py#L1-L28)
- [src/backend/agentchat/settings.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/settings.py#L1-L62)

### ä¸»è¦å­æ¨¡å—åŠŸèƒ½

#### APIæ¨¡å—ï¼ˆapi/ï¼‰
- **router.py**ï¼šç»Ÿä¸€è·¯ç”±æ³¨å†Œä¸­å¿ƒï¼ŒåŒ…å«æ‰€æœ‰APIç«¯ç‚¹
- **v1/**ï¼šAPIç‰ˆæœ¬1çš„å®Œæ•´æ¥å£å®ç°
- **services/**ï¼šå„ä¸šåŠ¡é¢†åŸŸçš„APIæœåŠ¡å°è£…
- **errcode/**ï¼šç»Ÿä¸€é”™è¯¯ç å’Œå¼‚å¸¸å¤„ç†

#### æ ¸å¿ƒæ¨¡å—ï¼ˆcore/ï¼‰
- **agents/**ï¼šæ™ºèƒ½ä½“å®ç°ï¼ˆCodeActã€MCPã€PlanExecuteç­‰ï¼‰
- **models/**ï¼šAIæ¨¡å‹ç®¡ç†å’ŒæœåŠ¡
- **callbacks/**ï¼šäº‹ä»¶å›è°ƒæœºåˆ¶

#### æ•°æ®åº“æ¨¡å—ï¼ˆdatabase/ï¼‰
- **session.py**ï¼šæ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†
- **dao/**ï¼šæ•°æ®è®¿é—®å¯¹è±¡ï¼Œå®ç°CRUDæ“ä½œ
- **models/**ï¼šæ•°æ®æ¨¡å‹å®šä¹‰
- **init_data.py**ï¼šæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

#### MCPæœåŠ¡å™¨æ¨¡å—ï¼ˆmcp_servers/ï¼‰
- **weather/**ï¼šå¤©æ°”æŸ¥è¯¢MCPæœåŠ¡
- **arxiv/**ï¼šå­¦æœ¯è®ºæ–‡MCPæœåŠ¡
- **lark_mcp/**ï¼šé£ä¹¦åŠå…¬MCPæœåŠ¡

#### å·¥å…·æ¨¡å—ï¼ˆtools/ï¼‰
- **web_search/**ï¼šç½‘ç»œæœç´¢å·¥å…·
- **get_weather/**ï¼šå¤©æ°”æŸ¥è¯¢å·¥å…·
- **text2image/**ï¼šæ–‡ç”Ÿå›¾å·¥å…·
- **convert_to_pdf/**ï¼šæ ¼å¼è½¬æ¢å·¥å…·

**ç« èŠ‚æ¥æº**
- [src/backend/agentchat/main.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py#L1-L108)
- [src/backend/agentchat/api/router.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py#L1-L28)
- [src/backend/agentchat/settings.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/settings.py#L1-L62)

## å‰ç«¯æ¶æ„è¯¦è§£

### å‰ç«¯æŠ€æœ¯æ ˆ

```mermaid
graph TB
subgraph "å‰ç«¯æ¶æ„"
MainTS[main.ts<br/>åº”ç”¨å…¥å£]
AppVue[App.vue<br/>æ ¹ç»„ä»¶]
subgraph "è·¯ç”±ç³»ç»Ÿ"
Router[index.ts<br/>è·¯ç”±é…ç½®]
Routes[pages/<br/>é¡µé¢è·¯ç”±]
end
subgraph "çŠ¶æ€ç®¡ç†"
Pinia[Pinia<br/>çŠ¶æ€ç®¡ç†]
UserStore[user/<br/>ç”¨æˆ·çŠ¶æ€]
AgentStore[agent_card/<br/>æ™ºèƒ½ä½“çŠ¶æ€]
HistoryStore[history_<br/>å†å²è®°å½•çŠ¶æ€]
end
subgraph "ç»„ä»¶ç³»ç»Ÿ"
Components[components/<br/>UIç»„ä»¶]
AgentCard[agentCard/<br/>æ™ºèƒ½ä½“å¡ç‰‡]
CommonCard[commonCard/<br/>é€šç”¨å¡ç‰‡]
Drawer[drawer/<br/>æŠ½å±‰ç»„ä»¶]
end
subgraph "APIå±‚"
Apis[apis/<br/>APIå°è£…]
Auth[auth.ts<br/>è®¤è¯API]
Chat[chat.ts<br/>å¯¹è¯API]
Agent[agent.ts<br/>æ™ºèƒ½ä½“API]
end
end
MainTS --> AppVue
AppVue --> Router
Router --> Routes
AppVue --> Pinia
Pinia --> UserStore
Pinia --> AgentStore
Pinia --> HistoryStore
AppVue --> Components
Components --> AgentCard
Components --> CommonCard
Components --> Drawer
Apis --> Auth
Apis --> Chat
Apis --> Agent
```

**å›¾è¡¨æ¥æº**
- [src/frontend/src/main.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/main.ts#L1-L18)
- [src/frontend/src/router/index.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/router/index.ts#L1-L255)
- [src/frontend/src/store/user/index.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/store/user/index.ts#L1-L83)

### å‰ç«¯æ¨¡å—ç»„ç»‡

#### æºä»£ç ç»“æ„ï¼ˆsrc/ï¼‰
- **main.ts**ï¼šVueåº”ç”¨å…¥å£ç‚¹ï¼Œåˆå§‹åŒ–Piniaå’Œè·¯ç”±
- **App.vue**ï¼šæ ¹ç»„ä»¶ï¼Œå®šä¹‰å…¨å±€å¸ƒå±€
- **router/**ï¼šVue Routeré…ç½®ï¼Œæ”¯æŒåµŒå¥—è·¯ç”±å’Œæƒé™æ§åˆ¶
- **store/**ï¼šPiniaçŠ¶æ€ç®¡ç†ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€æ™ºèƒ½ä½“ã€å†å²è®°å½•çŠ¶æ€
- **components/**ï¼šå¯å¤ç”¨UIç»„ä»¶åº“
- **pages/**ï¼šé¡µé¢çº§ç»„ä»¶ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
- **apis/**ï¼šAPIæ¥å£å°è£…ï¼Œç»Ÿä¸€HTTPè¯·æ±‚å¤„ç†

#### é¡µé¢è·¯ç”±ç»“æ„
- **workspace/**ï¼šå·¥ä½œåŒºç®¡ç†é¡µé¢
- **agent/**ï¼šæ™ºèƒ½ä½“ç®¡ç†é¡µé¢
- **knowledge/**ï¼šçŸ¥è¯†åº“ç®¡ç†é¡µé¢
- **tool/**ï¼šå·¥å…·ç®¡ç†é¡µé¢
- **mcp-server/**ï¼šMCPæœåŠ¡å™¨ç®¡ç†é¡µé¢
- **configuration/**ï¼šç³»ç»Ÿé…ç½®é¡µé¢

**ç« èŠ‚æ¥æº**
- [src/frontend/src/main.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/main.ts#L1-L18)
- [src/frontend/src/router/index.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/router/index.ts#L1-L255)
- [src/frontend/src/store/user/index.ts](https://github.com/Shy2593666979/AgentChat/src/frontend/src/store/user/index.ts#L1-L83)

## æ ¸å¿ƒæ¨¡å—åŠŸèƒ½è¾¹ç•Œ

### åç«¯æ ¸å¿ƒæ¨¡å—è¾¹ç•Œ

```mermaid
graph LR
subgraph "APIå±‚"
A1[è·¯ç”±æ³¨å†Œ]
A2[è¯·æ±‚éªŒè¯]
A3[å“åº”æ ¼å¼åŒ–]
end
subgraph "ä¸šåŠ¡æœåŠ¡å±‚"
B1[èŠå¤©æœåŠ¡]
B2[æ™ºèƒ½ä½“æœåŠ¡]
B3[çŸ¥è¯†åº“æœåŠ¡]
B4[MCPæœåŠ¡]
end
subgraph "æ ¸å¿ƒé€»è¾‘å±‚"
C1[AIæ¨¡å‹ç®¡ç†]
C2[æ™ºèƒ½ä½“ç¼–æ’]
C3[å·¥å…·è°ƒç”¨]
C4[è®°å¿†ç®¡ç†]
end
subgraph "æ•°æ®è®¿é—®å±‚"
D1[æ•°æ®åº“æ“ä½œ]
D2[ç¼“å­˜ç®¡ç†]
D3[æ–‡ä»¶å­˜å‚¨]
end
A1 --> B1
A2 --> B2
A3 --> B3
B1 --> C1
B2 --> C2
B3 --> C3
B4 --> C4
C1 --> D1
C2 --> D2
C3 --> D3
```

**å›¾è¡¨æ¥æº**
- [src/backend/agentchat/api/v1/chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L1-L122)
- [src/backend/agentchat/core/models/manager.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/core/models/manager.py#L1-L63)
- [src/backend/agentchat/database/session.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/database/session.py#L1-L36)

### å·¥å…·æ¨¡å—è¾¹ç•Œ

å·¥å…·æ¨¡å—æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ‰©å±•èƒ½åŠ›ï¼š

| å·¥å…·åˆ†ç±» | ä¸»è¦å·¥å…· | åŠŸèƒ½æè¿° |
|---------|---------|---------|
| **é€šä¿¡å·¥å…·** | send_email | é‚®ä»¶å‘é€åŠŸèƒ½ |
| **ä¿¡æ¯æ£€ç´¢** | web_search | Google/Tavilyæœç´¢ |
| **å­¦æœ¯å·¥å…·** | arxiv | å­¦æœ¯è®ºæ–‡æŸ¥è¯¢ |
| **ç”Ÿæ´»æœåŠ¡** | get_weather | å¤©æ°”ä¿¡æ¯æŸ¥è¯¢ |
| **æ–‡æ¡£å¤„ç†** | convert_to_pdf/docx | æ ¼å¼è½¬æ¢ |
| **å›¾åƒå¤„ç†** | text2image/image2text | å›¾åƒç”Ÿæˆå’Œè¯†åˆ« |
| **ç½‘ç»œå·¥å…·** | crawl_web | ç½‘é¡µçˆ¬å– |

**ç« èŠ‚æ¥æº**
- [src/backend/agentchat/tools/__init__.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/tools/__init__.py#L1-L48)

## ä»£ç æ‰§è¡Œæµç¨‹

### åº”ç”¨å¯åŠ¨æµç¨‹

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant Main as main.py
participant Router as router.py
participant Settings as settings.py
participant DB as æ•°æ®åº“
participant API as APIæœåŠ¡
User->>Main : å¯åŠ¨åº”ç”¨
Main->>Settings : åˆå§‹åŒ–åº”ç”¨é…ç½®
Settings->>Settings : åŠ è½½config.yaml
Settings-->>Main : é…ç½®å®Œæˆ
Main->>DB : åˆå§‹åŒ–æ•°æ®åº“
DB->>DB : åˆ›å»ºæ•°æ®è¡¨
DB->>DB : åˆå§‹åŒ–é»˜è®¤æ•°æ®
DB-->>Main : åˆå§‹åŒ–å®Œæˆ
Main->>Router : æ³¨å†Œè·¯ç”±
Router->>Router : å¯¼å…¥æ‰€æœ‰APIæ¨¡å—
Router-->>Main : è·¯ç”±æ³¨å†Œå®Œæˆ
Main->>API : å¯åŠ¨FastAPIæœåŠ¡
API-->>User : åº”ç”¨å°±ç»ª
```

**å›¾è¡¨æ¥æº**
- [src/backend/agentchat/main.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py#L66-L75)
- [src/backend/agentchat/settings.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/settings.py#L26-L62)

### å¯¹è¯å¤„ç†æµç¨‹

```mermaid
sequenceDiagram
participant Client as å®¢æˆ·ç«¯
participant API as èŠå¤©API
participant Agent as StreamingAgent
participant Memory as å†…å­˜ç³»ç»Ÿ
participant History as å†å²æœåŠ¡
participant LLM as AIæ¨¡å‹
Client->>API : å‘é€å¯¹è¯è¯·æ±‚
API->>API : éªŒè¯ç”¨æˆ·èº«ä»½
API->>Agent : åˆ›å»ºæµå¼å¯¹è¯ä»£ç†
Agent->>Memory : æ£€ç´¢ç›¸å…³å†å²
Memory-->>Agent : è¿”å›ä¸Šä¸‹æ–‡
Agent->>LLM : å‘èµ·æµå¼å¯¹è¯
LLM-->>Agent : æµå¼å“åº”
Agent->>Client : SSEæµå¼è¿”å›
Agent->>History : ä¿å­˜å¯¹è¯è®°å½•
History-->>Agent : ä¿å­˜å®Œæˆ
```

**å›¾è¡¨æ¥æº**
- [src/backend/agentchat/api/v1/chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L49-L122)

**ç« èŠ‚æ¥æº**
- [src/backend/agentchat/main.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py#L66-L75)
- [src/backend/agentchat/api/v1/chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L49-L122)

## éƒ¨ç½²ä¸å¯åŠ¨æŒ‡å—

### Dockeréƒ¨ç½²

**å¿«é€Ÿéƒ¨ç½²æ­¥éª¤ï¼š**
1. å…‹éš†é¡¹ç›®ï¼š`git clone https://github.com/Shy2593666979/AgentChat.git`
2. é…ç½®APIå¯†é’¥ï¼šå¤åˆ¶é…ç½®æ–‡ä»¶å¹¶å¡«å†™APIå¯†é’¥
3. å¯åŠ¨æœåŠ¡ï¼š`docker-compose up --build -d`

**æœåŠ¡è®¿é—®ï¼š**
- å‰ç«¯ç•Œé¢ï¼š`http://localhost:8090`
- åç«¯APIï¼š`http://localhost:7860`
- APIæ–‡æ¡£ï¼š`http://localhost:7860/docs`

### æœ¬åœ°å¼€å‘éƒ¨ç½²

**åç«¯ç¯å¢ƒï¼š**
```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨åç«¯æœåŠ¡
cd src/backend
uvicorn agentchat.main:app --port 7860 --host 0.0.0.0
```

**å‰ç«¯ç¯å¢ƒï¼š**
```bash
# å®‰è£…ä¾èµ–
cd src/frontend
npm install

# å¯åŠ¨å‰ç«¯æœåŠ¡
npm run dev
```

**ç« èŠ‚æ¥æº**
- [scripts/start.py](https://github.com/Shy2593666979/AgentChat/scripts/start.py#L1-L125)
- [docker/docker-compose.yml](https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L50-L126)

## æ€»ç»“

AgentChaté¡¹ç›®å±•ç°äº†ç°ä»£Webåº”ç”¨çš„æœ€ä½³å®è·µï¼Œé€šè¿‡æ¸…æ™°çš„æ¨¡å—åŒ–è®¾è®¡å®ç°äº†é«˜åº¦çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ï¼š

### æ¶æ„ä¼˜åŠ¿
- **å‰åç«¯åˆ†ç¦»**ï¼šVue 3 + FastAPIçš„ç°ä»£åŒ–æŠ€æœ¯æ ˆ
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„åŠŸèƒ½è¾¹ç•Œå’ŒèŒè´£åˆ’åˆ†
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDockeræ”¯æŒï¼Œä¾¿äºå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- **å·¥å…·ç”Ÿæ€**ï¼šä¸°å¯Œçš„å†…ç½®å·¥å…·å’ŒMCPåè®®æ”¯æŒ

### å¼€å‘å‹å¥½æ€§
- **å®Œå–„çš„æ–‡æ¡£**ï¼šè¯¦ç»†çš„APIæ–‡æ¡£å’Œå¼€å‘æŒ‡å—
- **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šç®€åŒ–éƒ¨ç½²å’Œä¾èµ–ç®¡ç†
- **ç±»å‹å®‰å…¨**ï¼šTypeScriptå’ŒPydanticæä¾›å¼ºç±»å‹æ”¯æŒ
- **çŠ¶æ€ç®¡ç†**ï¼šPiniaå’ŒContextå®ç°é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†

### æ‰©å±•èƒ½åŠ›
- **æ’ä»¶åŒ–æ¶æ„**ï¼šMCPæœåŠ¡å™¨å’Œå·¥å…·ç³»ç»Ÿçš„å¯æ‰©å±•è®¾è®¡
- **å¤šæ¨¡å‹æ”¯æŒ**ï¼šçµæ´»çš„AIæ¨¡å‹é›†æˆæœºåˆ¶
- **çŸ¥è¯†åº“ç³»ç»Ÿ**ï¼šRAGæŠ€æœ¯å®ç°çš„çŸ¥è¯†æ£€ç´¢å¢å¼º

è¿™ä¸ªé¡¹ç›®ä¸ºAIå¯¹è¯ç³»ç»Ÿçš„å¼€å‘æä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæ— è®ºæ˜¯å­¦ä¹ è¿˜æ˜¯å®é™…åº”ç”¨éƒ½å…·æœ‰å¾ˆé«˜çš„å‚è€ƒä»·å€¼ã€‚