<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API层 | AgentChat</title>
    <meta name="description" content="基于大语言模型的智能对话系统技术文档">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/agentchat-docs/assets/style.DTT6M7rU.css" as="style">
    <link rel="preload stylesheet" href="/agentchat-docs/vp-icons.css" as="style">
    
    <script type="module" src="/agentchat-docs/assets/app.D_XsrFjJ.js"></script>
    <link rel="preload" href="/agentchat-docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/agentchat-docs/assets/chunks/theme.Cw3hXjMi.js">
    <link rel="modulepreload" href="/agentchat-docs/assets/chunks/framework.D0TaUBpX.js">
    <link rel="modulepreload" href="/agentchat-docs/assets/项目目录结构_后端目录结构_API层.md.zlba20i0.lean.js">
    <link rel="icon" href="/agentchat-docs/favicon.ico">
    <meta name="theme-color" content="#3c82f6">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh-CN">
    <meta property="og:title" content="AgentChat | 智能对话系统">
    <meta property="og:site_name" content="AgentChat">
    <meta property="og:image" content="/agentchat-docs/logo.png">
    <meta property="og:url" content="https://shy2593666979.github.io/agentchat-docs/">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/agentchat-docs/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/agentchat-docs/logo.png" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>AgentChat</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/agentchat-docs/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/agentchat-docs/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>快速入门</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/agentchat-docs/%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>系统概述</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/agentchat-docs/%E6%8A%80%E6%9C%AF%E6%A0%88.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>技术栈</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>核心功能</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%A4%9AAgent%E7%B3%BB%E7%BB%9F.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>多Agent系统</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/MCP%E9%9B%86%E6%88%90.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>MCP集成</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E7%9F%A5%E8%AF%86%E5%BA%93%E7%B3%BB%E7%BB%9F.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>知识库系统</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%B7%A5%E5%85%B7%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>工具生态系统</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>API文档</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/API%E5%8F%82%E8%80%83.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>API总览</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/Agent%20API.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Agent API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/%E5%AF%B9%E8%AF%9DAPI.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>对话 API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/%E7%9F%A5%E8%AF%86%E5%BA%93API.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>知识库 API</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>开发指南</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>环境搭建</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>编码规范</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>调试技巧</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Shy2593666979/AgentChat" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Shy2593666979/AgentChat" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>入门与概览</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>系统概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>快速入门</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%8A%80%E6%9C%AF%E6%A0%88.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>技术栈</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>核心功能模块</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>核心功能模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%A4%9AAgent%E7%B3%BB%E7%BB%9F.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>多Agent系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/MCP%E9%9B%86%E6%88%90.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>MCP集成</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%B7%A5%E5%85%B7%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>工具生态系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E7%9F%A5%E8%AF%86%E5%BA%93%E7%B3%BB%E7%BB%9F.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>知识库系统</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>API 参考</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/API%E5%8F%82%E8%80%83.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>API总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/Agent%20API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Agent API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/%E5%AF%B9%E8%AF%9DAPI.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>对话 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/%E5%B7%A5%E5%85%B7API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>工具 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/%E7%94%A8%E6%88%B7API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>用户 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/%E7%9F%A5%E8%AF%86%E5%BA%93API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>知识库 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/API%E5%8F%82%E8%80%83/MCP%E6%9C%8D%E5%8A%A1API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>MCP服务 API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>数据库设计</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>设计总览</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>关系型数据模型</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>模型总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>用户数据模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E6%99%BA%E8%83%BD%E4%BD%93%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>智能体数据模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E5%AF%B9%E8%AF%9D%E4%BC%9A%E8%AF%9D%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>对话会话模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E6%B6%88%E6%81%AF%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>消息记录模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>知识库模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/MCP%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>MCP服务配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>向量存储架构</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>架构总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84/%E6%96%87%E6%A1%A3%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%90%91%E9%87%8F%E5%8C%96/%E6%96%87%E6%A1%A3%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%90%91%E9%87%8F%E5%8C%96.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>文档解析与向量化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E6%88%90/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E6%88%90.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>向量数据库集成</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>项目目录结构</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>结构总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%89%8D%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%89%8D%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>前端目录</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%90%8E%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%90%8E%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>后端目录</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>开发指南</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>开发指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>环境搭建</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>编码规范</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>调试技巧</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E6%B5%8B%E8%AF%95%E7%AD%96%E7%95%A5.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>测试策略</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>部署指南</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>部署指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>开发环境部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>生产环境部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86/%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>运维管理</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>安全考虑</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>安全概述</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>API安全</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/API%E5%AE%89%E5%85%A8/API%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>API安全概览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/API%E5%AE%89%E5%85%A8/%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E4%B8%8E%E9%98%B2%E6%B3%A8%E5%85%A5.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>输入验证与防注入</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/API%E5%AE%89%E5%85%A8/%E6%B2%99%E7%AE%B1%E6%89%A7%E8%A1%8C%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>沙箱执行安全</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>数据安全</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>数据安全概览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>传输安全</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/%E5%AF%86%E7%A0%81%E5%93%88%E5%B8%8C%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>密码哈希与加密</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>认证与授权</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>认证与授权概览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/%E4%BB%A4%E7%89%8C%E7%94%9F%E6%88%90%E4%B8%8E%E9%AA%8C%E8%AF%81/%E4%BB%A4%E7%89%8C%E7%94%9F%E6%88%90%E4%B8%8E%E9%AA%8C%E8%AF%81.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>令牌生成与验证</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/agentchat-docs/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>安全策略</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _agentchat-docs_%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84_%E5%90%8E%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84_API%E5%B1%82" data-v-e6f2a212><div><h1 id="api层" tabindex="-1">API层 <a class="header-anchor" href="#api层" aria-label="Permalink to &quot;API层&quot;">​</a></h1><cite> **本文档中引用的文件** - [router.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py) - [JWT.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/JWT.py) - [agent.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/agent.py) - [chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py) - [tool.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/tool.py) - [dialog.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/dialog.py) - [message.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/message.py) - [user.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/user.py) - [schemas.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/schemas.py) - [agent.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/agent.py) - [chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/chat.py) - [tool.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/tool.py) - [user.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/user.py) - [base.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/errcode/base.py) </cite><h2 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-label="Permalink to &quot;目录&quot;">​</a></h2><ol><li><a href="#api路由聚合与版本控制">API路由聚合与版本控制</a></li><li><a href="#restful路由函数定义">RESTful路由函数定义</a></li><li><a href="#jwt认证机制">JWT认证机制</a></li><li><a href="#请求响应模型与数据校验">请求响应模型与数据校验</a></li><li><a href="#api调用流程示例">API调用流程示例</a></li><li><a href="#错误码体系">错误码体系</a></li><li><a href="#新增api端点指南">新增API端点指南</a></li></ol><h2 id="api路由聚合与版本控制" tabindex="-1">API路由聚合与版本控制 <a class="header-anchor" href="#api路由聚合与版本控制" aria-label="Permalink to &quot;API路由聚合与版本控制&quot;">​</a></h2><p>AgentChat后端API层采用模块化设计，通过<code>router.py</code>文件实现API路由的聚合与版本控制。系统使用FastAPI的APIRouter组件，将不同功能模块的路由统一注册到<code>/api/v1</code>前缀下，实现了清晰的版本管理和模块分离。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter[&quot;APIRouter(prefix=&#39;/api/v1&#39;)&quot;] --&gt; chat[&quot;chat.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; dialog[&quot;dialog.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; message[&quot;message.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; agent[&quot;agent.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; history[&quot;history.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; user[&quot;user.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; tool[&quot;tool.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; llm[&quot;llm.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; knowledge[&quot;knowledge.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; mcp_server[&quot;mcp_server.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; mars[&quot;mars.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; workspace[&quot;workspace.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; usage_stats[&quot;usage_stats.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APIRouter --&gt; wechat[&quot;wechat.router&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;v1模块&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat[&quot;chat.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dialog[&quot;dialog.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">message[&quot;message.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent[&quot;agent.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">history[&quot;history.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user[&quot;user.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tool[&quot;tool.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm[&quot;llm.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">knowledge[&quot;knowledge.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mcp_server[&quot;mcp_server.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mars[&quot;mars.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">workspace[&quot;workspace.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">usage_stats[&quot;usage_stats.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wechat[&quot;wechat.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py#L6-L28" target="_blank" rel="noreferrer">router.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py#L1-L28" target="_blank" rel="noreferrer">router.py</a></li></ul><h2 id="restful路由函数定义" tabindex="-1">RESTful路由函数定义 <a class="header-anchor" href="#restful路由函数定义" aria-label="Permalink to &quot;RESTful路由函数定义&quot;">​</a></h2><p>API层的路由函数定义遵循RESTful设计原则，每个v1模块中的路由函数都通过路径操作装饰器进行定义，实现了清晰的HTTP方法映射和端点组织。</p><h3 id="agent模块路由" tabindex="-1">Agent模块路由 <a class="header-anchor" href="#agent模块路由" aria-label="Permalink to &quot;Agent模块路由&quot;">​</a></h3><p>Agent模块提供了对智能体的完整CRUD操作，包括创建、查询、更新、删除和搜索功能。每个路由函数都使用了<code>@router.post</code>、<code>@router.get</code>、<code>@router.put</code>和<code>@router.delete</code>装饰器来映射相应的HTTP方法。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class CreateAgentRequest {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+name : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+description : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+tool_ids : List[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+llm_id : Optional[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+mcp_ids : List[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+knowledge_ids : List[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+enable_memory : bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+system_prompt : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+logo_url : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class UpdateAgentRequest {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+agent_id : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+name : Optional[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+description : Optional[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+tool_ids : Optional[List[str]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+knowledge_ids : Optional[List[str]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+mcp_ids : Optional[List[str]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+llm_id : Optional[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+enable_memory : Optional[bool]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+logo_url : Optional[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+system_prompt : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class UnifiedResponseModel {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+status_code : int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+status_message : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+data : DataT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent --&gt; CreateAgentRequest : &quot;创建请求&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent --&gt; UpdateAgentRequest : &quot;更新请求&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent --&gt; UnifiedResponseModel : &quot;统一响应&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/agent.py#L13-L101" target="_blank" rel="noreferrer">agent.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/agent.py#L4-L26" target="_blank" rel="noreferrer">agent.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/agent.py#L13-L101" target="_blank" rel="noreferrer">agent.py</a></li></ul><h3 id="chat模块路由" tabindex="-1">Chat模块路由 <a class="header-anchor" href="#chat模块路由" aria-label="Permalink to &quot;Chat模块路由&quot;">​</a></h3><p>Chat模块实现了与AI助手的实时对话功能，支持流式响应。<code>/chat</code>端点使用<code>@router.post</code>装饰器定义，能够实时返回AI生成的内容，同时处理历史对话记录和上下文管理。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant 前端 as &quot;前端应用&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant ChatAPI as &quot;Chat API&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant StreamingAgent as &quot;StreamingAgent&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant MemoryClient as &quot;MemoryClient&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant HistoryService as &quot;HistoryService&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">前端-&gt;&gt;ChatAPI : POST /api/v1/chat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;ChatAPI : 验证用户权限</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;DialogService : 获取智能体配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;StreamingAgent : 初始化流式对话智能体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;MemoryClient : 搜索相关历史上下文</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;HistoryService : 获取完整对话历史</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;StreamingAgent : 启动流式响应</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingAgent--&gt;&gt;ChatAPI : SSE流式数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI--&gt;&gt;HistoryService : 保存助手回复</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI--&gt;&gt;前端 : text/event-stream响应</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Note over 前端,ChatAPI : 支持实时前端交互的流式对话</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L20-L122" target="_blank" rel="noreferrer">chat.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L20-L122" target="_blank" rel="noreferrer">chat.py</a></li></ul><h3 id="tool模块路由" tabindex="-1">Tool模块路由 <a class="header-anchor" href="#tool模块路由" aria-label="Permalink to &quot;Tool模块路由&quot;">​</a></h3><p>Tool模块提供了工具管理功能，包括创建、查询、更新和删除工具等操作。路由函数通过<code>Depends(get_login_user)</code>实现依赖注入，确保只有授权用户才能执行相关操作。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Start([开始]) --&gt; CreateTool[&quot;创建工具&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CreateTool --&gt; VerifyPermission[&quot;验证用户权限&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VerifyPermission --&gt; CheckInput[&quot;检查输入参数&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CheckInput --&gt; CreateInDB[&quot;在数据库中创建工具&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CreateInDB --&gt; ReturnSuccess[&quot;返回成功响应&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ReturnSuccess --&gt; End([结束])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style CreateTool fill:#f9f,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style ReturnSuccess fill:#bbf,stroke:#333</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/tool.py#L10-L86" target="_blank" rel="noreferrer">tool.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/tool.py#L10-L86" target="_blank" rel="noreferrer">tool.py</a></li></ul><h2 id="jwt认证机制" tabindex="-1">JWT认证机制 <a class="header-anchor" href="#jwt认证机制" aria-label="Permalink to &quot;JWT认证机制&quot;">​</a></h2><p>AgentChat系统实现了基于JWT（JSON Web Token）的认证机制，确保API接口的安全性。系统使用<code>fastapi_jwt_auth</code>库来处理JWT令牌的生成、验证和管理。</p><h3 id="jwt配置" tabindex="-1">JWT配置 <a class="header-anchor" href="#jwt配置" aria-label="Permalink to &quot;JWT配置&quot;">​</a></h3><p>系统在<code>JWT.py</code>文件中定义了JWT的配置参数，包括密钥、令牌位置和CSRF保护设置。这些配置通过Pydantic的<code>BaseSettings</code>类进行管理，确保了配置的一致性和类型安全。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class Settings {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+authjwt_secret_key : str = &#39;secret&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+authjwt_token_location : list = [&#39;cookies&#39;, &#39;headers&#39;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+authjwt_cookie_csrf_protect : bool = False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class UserPayload {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+user_id : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+user_role : Union[str, List[str]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+user_name : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+is_admin() : bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class UserService {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+decrypt_md5_password(password : str) : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+encrypt_sha256_password(password : str) : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+verify_password(password : str, encrypted_password : str) : bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+create_user(request : Request, login_user : UserPayload, req_data : CreateUserReq) : UserTable</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_random_user_avatar() : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_available_avatars() : List[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_user_info_by_id(user_id) : dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+update_user_info(user_id, user_avatar, user_description) : None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_user_id_by_name(user_name) : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Settings --&gt; UserPayload : &quot;配置&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserPayload --&gt; UserService : &quot;用户信息&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/JWT.py#L1-L7" target="_blank" rel="noreferrer">JWT.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/user.py#L23-L157" target="_blank" rel="noreferrer">user.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/JWT.py#L1-L7" target="_blank" rel="noreferrer">JWT.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/user.py#L114-L157" target="_blank" rel="noreferrer">user.py</a></li></ul><h3 id="认证流程" tabindex="-1">认证流程 <a class="header-anchor" href="#认证流程" aria-label="Permalink to &quot;认证流程&quot;">​</a></h3><p>系统的认证流程通过<code>get_login_user</code>依赖函数实现。该函数首先检查请求是否在白名单中，如果是则直接返回管理员用户；否则执行JWT验证，解析令牌中的用户信息。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant 客户端 as &quot;客户端&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant API as &quot;API端点&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant Auth as &quot;认证依赖&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">客户端-&gt;&gt;API : 请求API端点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">API-&gt;&gt;Auth : 调用get_login_user</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alt 白名单路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Auth--&gt;&gt;API : 返回Admin用户</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">else 非白名单路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Auth-&gt;&gt;Auth : jwt_required()验证</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Auth-&gt;&gt;Auth : 解析JWT令牌</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Auth-&gt;&gt;Auth : 获取用户信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Auth--&gt;&gt;API : 返回UserPayload</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">API-&gt;&gt;API : 执行业务逻辑</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">API--&gt;&gt;客户端 : 返回响应</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/user.py#L114-L129" target="_blank" rel="noreferrer">user.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/user.py#L114-L129" target="_blank" rel="noreferrer">user.py</a></li></ul><h2 id="请求响应模型与数据校验" tabindex="-1">请求响应模型与数据校验 <a class="header-anchor" href="#请求响应模型与数据校验" aria-label="Permalink to &quot;请求响应模型与数据校验&quot;">​</a></h2><p>API层使用Pydantic模型实现请求参数校验、数据序列化和响应格式统一，确保了数据的一致性和安全性。</p><h3 id="统一响应模型" tabindex="-1">统一响应模型 <a class="header-anchor" href="#统一响应模型" aria-label="Permalink to &quot;统一响应模型&quot;">​</a></h3><p>系统定义了<code>UnifiedResponseModel</code>作为统一的响应格式，包含状态码、状态消息和数据三个字段。这种设计使得前端可以统一处理所有API响应，提高了开发效率。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class UnifiedResponseModel {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+status_code : int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+status_message : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+data : DataT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class CreateUserReq {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+user_name : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+password : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class ConversationReq {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+user_input : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+dialog_id : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+file_url : Optional[str]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class ToolCreateRequest {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+zh_name : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+en_name : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+description : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+logo_url : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UnifiedResponseModel &lt;|-- resp_200 : &quot;成功响应&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UnifiedResponseModel &lt;|-- resp_500 : &quot;错误响应&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp_200 --&gt; UnifiedResponseModel : &quot;返回&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp_500 --&gt; UnifiedResponseModel : &quot;返回&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/schemas.py#L1-L28" target="_blank" rel="noreferrer">schemas.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/chat.py#L6-L10" target="_blank" rel="noreferrer">chat.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/tool.py#L5-L10" target="_blank" rel="noreferrer">tool.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/schemas.py#L1-L28" target="_blank" rel="noreferrer">schemas.py</a></li></ul><h3 id="数据校验机制" tabindex="-1">数据校验机制 <a class="header-anchor" href="#数据校验机制" aria-label="Permalink to &quot;数据校验机制&quot;">​</a></h3><p>Pydantic模型通过字段注解和验证器实现数据校验。系统在<code>schema</code>目录中定义了各种请求模型，如<code>CreateAgentRequest</code>、<code>UpdateAgentRequest</code>等，每个字段都指定了类型、约束和描述信息。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Request[&quot;HTTP请求&quot;] --&gt; Validation[&quot;Pydantic数据校验&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Validation --&gt; IsValid{&quot;数据有效?&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IsValid --&gt; |是| Process[&quot;处理业务逻辑&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IsValid --&gt; |否| Error[&quot;返回422错误&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Process --&gt; Response[&quot;构建响应&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Response --&gt; Serialize[&quot;Pydantic序列化&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Serialize --&gt; Return[&quot;返回JSON响应&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style Validation fill:#f96,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style Error fill:#f66,stroke:#333</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/agent.py#L4-L26" target="_blank" rel="noreferrer">agent.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/chat.py#L6-L10" target="_blank" rel="noreferrer">chat.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/tool.py#L5-L10" target="_blank" rel="noreferrer">tool.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/schema/agent.py#L4-L26" target="_blank" rel="noreferrer">agent.py</a></li></ul><h2 id="api调用流程示例" tabindex="-1">API调用流程示例 <a class="header-anchor" href="#api调用流程示例" aria-label="Permalink to &quot;API调用流程示例&quot;">​</a></h2><p>以下通过实际HTTP请求示例展示API调用流程，帮助开发者理解如何与AgentChat后端进行交互。</p><h3 id="创建agent" tabindex="-1">创建Agent <a class="header-anchor" href="#创建agent" aria-label="Permalink to &quot;创建Agent&quot;">​</a></h3><p>创建智能体的API调用需要提供智能体的名称、描述、工具ID、LLM ID等信息。系统会验证用户权限和智能体名称的唯一性。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant 前端 as &quot;前端应用&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant AgentAPI as &quot;Agent API&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant AgentService as &quot;AgentService&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">前端-&gt;&gt;AgentAPI : POST /api/v1/agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentAPI-&gt;&gt;AgentAPI : 解析CreateAgentRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentAPI-&gt;&gt;AgentService : check_repeat_name()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentService--&gt;&gt;AgentAPI : 名称是否重复</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alt 名称重复</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentAPI--&gt;&gt;前端 : 500 {&quot;message&quot; : &quot;应用名称重复&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">else 名称可用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentAPI-&gt;&gt;AgentService : create_agent()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentService--&gt;&gt;AgentAPI : 创建成功</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentAPI--&gt;&gt;前端 : 200 {&quot;status_code&quot; : 200}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/agent.py#L16-L37" target="_blank" rel="noreferrer">agent.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/agent.py#L16-L37" target="_blank" rel="noreferrer">agent.py</a></li></ul><h3 id="发送对话请求" tabindex="-1">发送对话请求 <a class="header-anchor" href="#发送对话请求" aria-label="Permalink to &quot;发送对话请求&quot;">​</a></h3><p>发送对话请求的API支持流式响应，能够实时返回AI生成的内容。系统会整合用户输入、附件URL和历史上下文，生成完整的对话消息。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant 前端 as &quot;前端应用&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant ChatAPI as &quot;Chat API&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant StreamingAgent as &quot;StreamingAgent&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">前端-&gt;&gt;ChatAPI : POST /api/v1/chat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;ChatAPI : 解析ConversationReq</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;DialogService : get_agent_by_dialog_id()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;StreamingAgent : 初始化智能体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;MemoryClient : 搜索历史上下文</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;StreamingAgent : 启动流式生成</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loop 流式响应</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingAgent--&gt;&gt;ChatAPI : SSE数据块</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI--&gt;&gt;前端 : data : {event}\n\n</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI-&gt;&gt;HistoryService : 保存对话历史</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatAPI--&gt;&gt;前端 : 连接关闭</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L49-L122" target="_blank" rel="noreferrer">chat.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L49-L122" target="_blank" rel="noreferrer">chat.py</a></li></ul><h2 id="错误码体系" tabindex="-1">错误码体系 <a class="header-anchor" href="#错误码体系" aria-label="Permalink to &quot;错误码体系&quot;">​</a></h2><p>系统实现了统一的错误码体系，通过<code>errcode</code>模块定义各种错误类型，确保API响应的一致性和可预测性。</p><h3 id="错误码设计" tabindex="-1">错误码设计 <a class="header-anchor" href="#错误码设计" aria-label="Permalink to &quot;错误码设计&quot;">​</a></h3><p>错误码采用五位数字编码，前三位代表功能模块，后两位表示模块内部的具体错误。系统定义了基础错误码类<code>BaseErrorCode</code>，其他具体错误码继承自该基类。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class BaseErrorCode {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+Code : int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+Msg : str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+return_resp(msg : str, data : any) : UnifiedResponseModel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+http_exception(msg : str) : HTTPException</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class UnAuthorizedError {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+Code : int = 403</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+Msg : str = &#39;暂无操作权限&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class NotFoundError {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+Code : int = 404</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+Msg : str = &#39;资源不存在&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BaseErrorCode &lt;|-- UnAuthorizedError</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BaseErrorCode &lt;|-- NotFoundError</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UnAuthorizedError --&gt; BaseErrorCode : &quot;继承&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NotFoundError --&gt; BaseErrorCode : &quot;继承&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/errcode/base.py#L6-L28" target="_blank" rel="noreferrer">base.py</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/errcode/base.py#L6-L28" target="_blank" rel="noreferrer">base.py</a></li></ul><h3 id="错误处理流程" tabindex="-1">错误处理流程 <a class="header-anchor" href="#错误处理流程" aria-label="Permalink to &quot;错误处理流程&quot;">​</a></h3><p>API端点通过try-catch机制捕获异常，并使用统一的错误响应函数返回标准化的错误信息。这种设计使得前端可以统一处理各种错误情况。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Start([API调用]) --&gt; Try[&quot;try块&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Try --&gt; BusinessLogic[&quot;执行业务逻辑&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BusinessLogic --&gt; Success{&quot;成功?&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Success --&gt; |是| ReturnSuccess[&quot;返回成功响应&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Success --&gt; |否| Catch[&quot;catch异常&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Catch --&gt; LogError[&quot;记录错误日志&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LogError --&gt; ReturnError[&quot;返回错误响应&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ReturnSuccess --&gt; End([结束])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ReturnError --&gt; End</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style Try fill:#9f9,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style Catch fill:#f99,stroke:#333</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/agent.py#L19-L40" target="_blank" rel="noreferrer">agent.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/chat.py#L101-L116" target="_blank" rel="noreferrer">chat.py</a></li></ul><h2 id="新增api端点指南" tabindex="-1">新增API端点指南 <a class="header-anchor" href="#新增api端点指南" aria-label="Permalink to &quot;新增API端点指南&quot;">​</a></h2><p>为确保新API端点符合现有架构规范，开发者应遵循以下指南进行开发。</p><h3 id="模块化设计" tabindex="-1">模块化设计 <a class="header-anchor" href="#模块化设计" aria-label="Permalink to &quot;模块化设计&quot;">​</a></h3><p>新增API端点应遵循模块化设计原则，将相关功能组织在同一个模块中。对于v1版本的API，应将新端点添加到<code>api/v1/</code>目录下的相应文件中。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src[&quot;src/backend/agentchat/api/&quot;] --&gt; v1[&quot;v1/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src --&gt; router[&quot;router.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src --&gt; JWT[&quot;JWT.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v1 --&gt; agent[&quot;agent.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v1 --&gt; chat[&quot;chat.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v1 --&gt; tool[&quot;tool.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v1 --&gt; dialog[&quot;dialog.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v1 --&gt; message[&quot;message.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v1 --&gt; user[&quot;user.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">new_feature[&quot;new_feature.py&quot;] --&gt; v1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">new_feature --&gt; schema[&quot;../schema/new_feature.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">new_feature --&gt; service[&quot;../services/new_feature.py&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style new_feature fill:#ff0,stroke:#333</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py#L2-L28" target="_blank" rel="noreferrer">router.py</a></li></ul><h3 id="路由注册" tabindex="-1">路由注册 <a class="header-anchor" href="#路由注册" aria-label="Permalink to &quot;路由注册&quot;">​</a></h3><p>新增模块需要在<code>router.py</code>文件中导入并注册到主路由器。系统使用<code>APIRouter</code>的<code>include_router</code>方法将模块路由包含到主应用中。</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在router.py中添加新模块</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agentchat.api.v1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> new_feature</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router.include_router(new_feature.router)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/router.py#L8-L28" target="_blank" rel="noreferrer">router.py</a></li></ul><h3 id="安全性考虑" tabindex="-1">安全性考虑 <a class="header-anchor" href="#安全性考虑" aria-label="Permalink to &quot;安全性考虑&quot;">​</a></h3><p>所有API端点都应考虑安全性，使用JWT认证保护敏感操作。通过<code>Depends(get_login_user)</code>依赖注入获取当前登录用户信息，并验证用户权限。</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@router.post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/new-endpoint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> new_endpoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    request_data: NewRequestModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Body(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    login_user: UserPayload </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Depends(get_login_user)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 验证用户权限</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> login_user.is_admin():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resp_500(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;暂无操作权限&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 处理业务逻辑</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resp_200()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/user.py#L114-L129" target="_blank" rel="noreferrer">user.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/v1/agent.py#L18-L19" target="_blank" rel="noreferrer">agent.py</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Shy2593666979/AgentChat/edit/main/docs/项目目录结构/后端目录结构/API层.md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>最后更新于: <time datetime="2025-11-27T11:56:00.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/agentchat-docs/%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>系统概述</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>基于 MIT 许可发布</p><p class="copyright" data-v-566314d4>Copyright © 2024 AgentChat</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api参考_agent api.md\":\"BoXC74Ii\",\"api参考_api参考.md\":\"DnWWcQcZ\",\"api参考_mcp服务api.md\":\"sVbv4wa1\",\"api参考_对话api.md\":\"dIFfUF2M\",\"api参考_工具api.md\":\"6BujpVFn\",\"api参考_用户api.md\":\"IdNF7w__\",\"api参考_知识库api.md\":\"DALXKeQi\",\"index.md\":\"3uOdMfln\",\"sidebar.md\":\"DI6-866b\",\"安全考虑_api安全_api安全.md\":\"DkRDtCmD\",\"安全考虑_api安全_沙箱执行安全.md\":\"BYmf-Z_N\",\"安全考虑_api安全_输入验证与防注入.md\":\"CGSHnz4l\",\"安全考虑_安全考虑.md\":\"HSGg-aRA\",\"安全考虑_数据安全_传输安全.md\":\"D0LS0Ohf\",\"安全考虑_数据安全_密码哈希与数据加密.md\":\"BLUaZYzY\",\"安全考虑_数据安全_数据安全.md\":\"_JJAIrcd\",\"安全考虑_认证与授权_令牌生成与验证_令牌刷新与失效.md\":\"D_V-2C-z\",\"安全考虑_认证与授权_令牌生成与验证_令牌生成与验证.md\":\"Bz2uqfb9\",\"安全考虑_认证与授权_令牌生成与验证_令牌生成机制.md\":\"DkOENN5e\",\"安全考虑_认证与授权_令牌生成与验证_令牌验证流程.md\":\"DGWMEFMj\",\"安全考虑_认证与授权_安全策略_csrf策略.md\":\"B6pNoB9v\",\"安全考虑_认证与授权_安全策略_传输安全.md\":\"BEkG2EG5\",\"安全考虑_认证与授权_安全策略_安全策略.md\":\"B8eDZJ9p\",\"安全考虑_认证与授权_安全策略_访问控制.md\":\"ssGVZKX-\",\"安全考虑_认证与授权_认证与授权.md\":\"Bd3JAd8h\",\"安全考虑_认证与授权_认证配置.md\":\"C-F0rXTe\",\"安全考虑_访问控制.md\":\"C_dv55HP\",\"开发指南_开发指南.md\":\"CvRSPA-7\",\"开发指南_测试策略.md\":\"B0O_Q_Gx\",\"开发指南_环境搭建.md\":\"BDD2tf8g\",\"开发指南_编码规范.md\":\"f72cRaUx\",\"开发指南_调试技巧.md\":\"JJKynXRc\",\"快速入门.md\":\"CgeucNZ9\",\"技术栈.md\":\"DPgHeCi2\",\"数据库设计_关系型数据模型_mcp服务配置模型.md\":\"DAeWi6Sg\",\"数据库设计_关系型数据模型_关系型数据模型.md\":\"ZptXzVel\",\"数据库设计_关系型数据模型_对话会话数据模型.md\":\"CLTpTTR6\",\"数据库设计_关系型数据模型_工作区会话模型.md\":\"WkWgLPW_\",\"数据库设计_关系型数据模型_工具定义数据模型.md\":\"BgNfqCHJ\",\"数据库设计_关系型数据模型_智能体数据模型.md\":\"CEegsGC5\",\"数据库设计_关系型数据模型_消息记录数据模型.md\":\"BpBgsMSt\",\"数据库设计_关系型数据模型_用户数据模型.md\":\"BkN8VbFv\",\"数据库设计_关系型数据模型_知识库数据模型.md\":\"BM2irBYa\",\"数据库设计_关系型数据模型_知识文件数据模型.md\":\"CcLxMpSs\",\"数据库设计_向量存储架构_elasticsearch配置.md\":\"FtV8fn3f\",\"数据库设计_向量存储架构_向量存储架构.md\":\"WhSvxXEQ\",\"数据库设计_向量存储架构_向量数据库集成_chromadb 集成.md\":\"BfmzJyLG\",\"数据库设计_向量存储架构_向量数据库集成_milvus 集成.md\":\"D_BTfWMC\",\"数据库设计_向量存储架构_向量数据库集成_向量数据库集成.md\":\"DF74Dc-B\",\"数据库设计_向量存储架构_文档解析与向量化_文本向量化.md\":\"D5QmipM2\",\"数据库设计_向量存储架构_文档解析与向量化_文档解析.md\":\"CyK8-giB\",\"数据库设计_向量存储架构_文档解析与向量化_文档解析与向量化.md\":\"NBbeTUM5\",\"数据库设计_数据库设计.md\":\"D-edM2aa\",\"核心功能模块_mcp集成.md\":\"DwKFlY08\",\"核心功能模块_多agent系统.md\":\"CQyDFxX3\",\"核心功能模块_工具生态系统.md\":\"mVwqOzcO\",\"核心功能模块_核心功能模块.md\":\"CySmXmx6\",\"核心功能模块_知识库系统.md\":\"BVe2UuQX\",\"系统概述.md\":\"DAp3idQj\",\"部署指南_开发环境部署.md\":\"CcgLztPH\",\"部署指南_生产环境部署_反向代理配置.md\":\"Cgp8jnV4\",\"部署指南_生产环境部署_安全加固.md\":\"JytOkqlf\",\"部署指南_生产环境部署_生产服务配置.md\":\"xvPDb8FT\",\"部署指南_生产环境部署_生产环境部署.md\":\"D1cjjTnX\",\"部署指南_运维管理_备份与恢复.md\":\"qlb3E_wW\",\"部署指南_运维管理_服务管理.md\":\"-HyYXvCr\",\"部署指南_运维管理_监控与维护.md\":\"Bzzvdtds\",\"部署指南_运维管理_运维管理.md\":\"zQJYuypq\",\"部署指南_部署指南.md\":\"BVU6oCyi\",\"项目目录结构_前端目录结构_api集成.md\":\"Chf_nqEa\",\"项目目录结构_前端目录结构_ui组件体系.md\":\"DwRLbXPZ\",\"项目目录结构_前端目录结构_前端目录结构.md\":\"ClRGFCbM\",\"项目目录结构_前端目录结构_状态管理.md\":\"EoAjtg8z\",\"项目目录结构_前端目录结构_路由与导航.md\":\"C0w_Gvuo\",\"项目目录结构_后端目录结构_api层.md\":\"zlba20i0\",\"项目目录结构_后端目录结构_后端目录结构.md\":\"CfeWlJMn\",\"项目目录结构_后端目录结构_数据层.md\":\"D_PBLUmd\",\"项目目录结构_后端目录结构_服务层_mcp服务.md\":\"E9og9Hp-\",\"项目目录结构_后端目录结构_服务层_rag服务.md\":\"Dy89AbiB\",\"项目目录结构_后端目录结构_服务层_服务层.md\":\"hyBqFjKr\",\"项目目录结构_后端目录结构_服务层_核心服务.md\":\"BYWADGcv\",\"项目目录结构_后端目录结构_服务层_记忆服务.md\":\"MRdvAQi6\",\"项目目录结构_后端目录结构_核心功能层_react智能体.md\":\"DIGhNzUS\",\"项目目录结构_后端目录结构_核心功能层_核心功能层.md\":\"CoMgyboI\",\"项目目录结构_后端目录结构_核心功能层_统一模型管理器.md\":\"CBaCMauk\",\"项目目录结构_后端目录结构_核心功能层_计划-执行智能体.md\":\"CWss6Gyu\",\"项目目录结构_项目目录结构.md\":\"BzZwFJgB\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"AgentChat\",\"description\":\"基于大语言模型的智能对话系统技术文档\",\"base\":\"/agentchat-docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"快速入门\",\"link\":\"/快速入门\"},{\"text\":\"系统概述\",\"link\":\"/系统概述\"},{\"text\":\"技术栈\",\"link\":\"/技术栈\"},{\"text\":\"核心功能\",\"items\":[{\"text\":\"多Agent系统\",\"link\":\"/核心功能模块/多Agent系统\"},{\"text\":\"MCP集成\",\"link\":\"/核心功能模块/MCP集成\"},{\"text\":\"知识库系统\",\"link\":\"/核心功能模块/知识库系统\"},{\"text\":\"工具生态系统\",\"link\":\"/核心功能模块/工具生态系统\"}]},{\"text\":\"API文档\",\"items\":[{\"text\":\"API总览\",\"link\":\"/API参考/API参考\"},{\"text\":\"Agent API\",\"link\":\"/API参考/Agent API\"},{\"text\":\"对话 API\",\"link\":\"/API参考/对话API\"},{\"text\":\"知识库 API\",\"link\":\"/API参考/知识库API\"}]},{\"text\":\"开发指南\",\"items\":[{\"text\":\"环境搭建\",\"link\":\"/开发指南/环境搭建\"},{\"text\":\"编码规范\",\"link\":\"/开发指南/编码规范\"},{\"text\":\"调试技巧\",\"link\":\"/开发指南/调试技巧\"}]}],\"sidebar\":{\"/\":[{\"text\":\"入门与概览\",\"collapsed\":false,\"items\":[{\"text\":\"系统概述\",\"link\":\"/系统概述\"},{\"text\":\"快速入门\",\"link\":\"/快速入门\"},{\"text\":\"技术栈\",\"link\":\"/技术栈\"}]},{\"text\":\"核心功能模块\",\"collapsed\":false,\"items\":[{\"text\":\"核心功能模块\",\"link\":\"/核心功能模块/核心功能模块\"},{\"text\":\"多Agent系统\",\"link\":\"/核心功能模块/多Agent系统\"},{\"text\":\"MCP集成\",\"link\":\"/核心功能模块/MCP集成\"},{\"text\":\"工具生态系统\",\"link\":\"/核心功能模块/工具生态系统\"},{\"text\":\"知识库系统\",\"link\":\"/核心功能模块/知识库系统\"}]},{\"text\":\"API 参考\",\"collapsed\":true,\"items\":[{\"text\":\"API总览\",\"link\":\"/API参考/API参考\"},{\"text\":\"Agent API\",\"link\":\"/API参考/Agent API\"},{\"text\":\"对话 API\",\"link\":\"/API参考/对话API\"},{\"text\":\"工具 API\",\"link\":\"/API参考/工具API\"},{\"text\":\"用户 API\",\"link\":\"/API参考/用户API\"},{\"text\":\"知识库 API\",\"link\":\"/API参考/知识库API\"},{\"text\":\"MCP服务 API\",\"link\":\"/API参考/MCP服务API\"}]},{\"text\":\"数据库设计\",\"collapsed\":true,\"items\":[{\"text\":\"设计总览\",\"link\":\"/数据库设计/数据库设计\"},{\"text\":\"关系型数据模型\",\"items\":[{\"text\":\"模型总览\",\"link\":\"/数据库设计/关系型数据模型/关系型数据模型\"},{\"text\":\"用户数据模型\",\"link\":\"/数据库设计/关系型数据模型/用户数据模型\"},{\"text\":\"智能体数据模型\",\"link\":\"/数据库设计/关系型数据模型/智能体数据模型\"},{\"text\":\"对话会话模型\",\"link\":\"/数据库设计/关系型数据模型/对话会话数据模型\"},{\"text\":\"消息记录模型\",\"link\":\"/数据库设计/关系型数据模型/消息记录数据模型\"},{\"text\":\"知识库模型\",\"link\":\"/数据库设计/关系型数据模型/知识库数据模型\"},{\"text\":\"MCP服务配置\",\"link\":\"/数据库设计/关系型数据模型/MCP服务配置模型\"}]},{\"text\":\"向量存储架构\",\"items\":[{\"text\":\"架构总览\",\"link\":\"/数据库设计/向量存储架构/向量存储架构\"},{\"text\":\"文档解析与向量化\",\"link\":\"/数据库设计/向量存储架构/文档解析与向量化/文档解析与向量化\"},{\"text\":\"向量数据库集成\",\"link\":\"/数据库设计/向量存储架构/向量数据库集成/向量数据库集成\"}]}]},{\"text\":\"项目目录结构\",\"collapsed\":true,\"items\":[{\"text\":\"结构总览\",\"link\":\"/项目目录结构/项目目录结构\"},{\"text\":\"前端目录\",\"link\":\"/项目目录结构/前端目录结构/前端目录结构\"},{\"text\":\"后端目录\",\"link\":\"/项目目录结构/后端目录结构/后端目录结构\"}]},{\"text\":\"开发指南\",\"collapsed\":true,\"items\":[{\"text\":\"开发指南\",\"link\":\"/开发指南/开发指南\"},{\"text\":\"环境搭建\",\"link\":\"/开发指南/环境搭建\"},{\"text\":\"编码规范\",\"link\":\"/开发指南/编码规范\"},{\"text\":\"调试技巧\",\"link\":\"/开发指南/调试技巧\"},{\"text\":\"测试策略\",\"link\":\"/开发指南/测试策略\"}]},{\"text\":\"部署指南\",\"collapsed\":true,\"items\":[{\"text\":\"部署指南\",\"link\":\"/部署指南/部署指南\"},{\"text\":\"开发环境部署\",\"link\":\"/部署指南/开发环境部署\"},{\"text\":\"生产环境部署\",\"link\":\"/部署指南/生产环境部署/生产环境部署\"},{\"text\":\"运维管理\",\"link\":\"/部署指南/运维管理/运维管理\"}]},{\"text\":\"安全考虑\",\"collapsed\":true,\"items\":[{\"text\":\"安全概述\",\"link\":\"/安全考虑/安全考虑\"},{\"text\":\"API安全\",\"items\":[{\"text\":\"API安全概览\",\"link\":\"/安全考虑/API安全/API安全\"},{\"text\":\"输入验证与防注入\",\"link\":\"/安全考虑/API安全/输入验证与防注入\"},{\"text\":\"沙箱执行安全\",\"link\":\"/安全考虑/API安全/沙箱执行安全\"}]},{\"text\":\"数据安全\",\"items\":[{\"text\":\"数据安全概览\",\"link\":\"/安全考虑/数据安全/数据安全\"},{\"text\":\"传输安全\",\"link\":\"/安全考虑/数据安全/传输安全\"},{\"text\":\"密码哈希与加密\",\"link\":\"/安全考虑/数据安全/密码哈希与数据加密\"}]},{\"text\":\"认证与授权\",\"items\":[{\"text\":\"认证与授权概览\",\"link\":\"/安全考虑/认证与授权/认证与授权\"},{\"text\":\"令牌生成与验证\",\"link\":\"/安全考虑/认证与授权/令牌生成与验证/令牌生成与验证\"},{\"text\":\"安全策略\",\"link\":\"/安全考虑/认证与授权/安全策略/安全策略\"}]}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Shy2593666979/AgentChat\"}],\"footer\":{\"message\":\"基于 MIT 许可发布\",\"copyright\":\"Copyright © 2024 AgentChat\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}},\"editLink\":{\"pattern\":\"https://github.com/Shy2593666979/AgentChat/edit/main/docs/:path\",\"text\":\"在 GitHub 上编辑此页面\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>