<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>服务层 | AgentChat</title>
    <meta name="description" content="基于大语言模型的智能对话系统技术文档">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/AgentChat/assets/style.BZBlxtvE.css" as="style">
    <link rel="preload stylesheet" href="/AgentChat/vp-icons.css" as="style">
    
    <script type="module" src="/AgentChat/assets/app.DvUEXvzn.js"></script>
    <link rel="preload" href="/AgentChat/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/AgentChat/assets/chunks/theme.CyrIUa8u.js">
    <link rel="modulepreload" href="/AgentChat/assets/chunks/framework.7BqJGZTL.js">
    <link rel="modulepreload" href="/AgentChat/assets/项目目录结构_后端目录结构_服务层_服务层.md.bf4uEXwK.lean.js">
    <link rel="icon" href="/AgentChat/favicon.ico">
    <meta name="theme-color" content="#3c82f6">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh-CN">
    <meta property="og:title" content="AgentChat | 智能对话系统">
    <meta property="og:site_name" content="AgentChat">
    <meta property="og:image" content="/AgentChat/logo.png">
    <meta property="og:url" content="https://shy2593666979.github.io/AgentChat/">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/AgentChat/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/AgentChat/logo.png" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>AgentChat</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AgentChat/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AgentChat/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>快速入门</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AgentChat/%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>系统概述</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AgentChat/%E6%8A%80%E6%9C%AF%E6%A0%88.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>技术栈</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>核心功能</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%A4%9AAgent%E7%B3%BB%E7%BB%9F.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>多Agent系统</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/MCP%E9%9B%86%E6%88%90.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>MCP集成</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E7%9F%A5%E8%AF%86%E5%BA%93%E7%B3%BB%E7%BB%9F.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>知识库系统</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%B7%A5%E5%85%B7%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>工具生态系统</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>API文档</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/API%E5%8F%82%E8%80%83/API%E5%8F%82%E8%80%83.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>API总览</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/API%E5%8F%82%E8%80%83/Agent%20API.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Agent API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/API%E5%8F%82%E8%80%83/%E5%AF%B9%E8%AF%9DAPI.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>对话 API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/API%E5%8F%82%E8%80%83/%E7%9F%A5%E8%AF%86%E5%BA%93API.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>知识库 API</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>开发指南</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>环境搭建</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>编码规范</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>调试技巧</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Shy2593666979/AgentChat" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Shy2593666979/AgentChat" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>入门与概览</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>系统概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>快速入门</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%8A%80%E6%9C%AF%E6%A0%88.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>技术栈</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>核心功能模块</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>核心功能模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%A4%9AAgent%E7%B3%BB%E7%BB%9F.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>多Agent系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/MCP%E9%9B%86%E6%88%90.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>MCP集成</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E5%B7%A5%E5%85%B7%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>工具生态系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97/%E7%9F%A5%E8%AF%86%E5%BA%93%E7%B3%BB%E7%BB%9F.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>知识库系统</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>API 参考</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/API%E5%8F%82%E8%80%83/API%E5%8F%82%E8%80%83.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>API总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/API%E5%8F%82%E8%80%83/Agent%20API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Agent API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/API%E5%8F%82%E8%80%83/%E5%AF%B9%E8%AF%9DAPI.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>对话 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/API%E5%8F%82%E8%80%83/%E5%B7%A5%E5%85%B7API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>工具 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/API%E5%8F%82%E8%80%83/%E7%94%A8%E6%88%B7API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>用户 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/API%E5%8F%82%E8%80%83/%E7%9F%A5%E8%AF%86%E5%BA%93API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>知识库 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/API%E5%8F%82%E8%80%83/MCP%E6%9C%8D%E5%8A%A1API.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>MCP服务 API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>数据库设计</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>设计总览</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>关系型数据模型</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>模型总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>用户数据模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E6%99%BA%E8%83%BD%E4%BD%93%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>智能体数据模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E5%AF%B9%E8%AF%9D%E4%BC%9A%E8%AF%9D%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>对话会话模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E6%B6%88%E6%81%AF%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>消息记录模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>知识库模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/MCP%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9E%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>MCP服务配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>向量存储架构</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>架构总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84/%E6%96%87%E6%A1%A3%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%90%91%E9%87%8F%E5%8C%96/%E6%96%87%E6%A1%A3%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%90%91%E9%87%8F%E5%8C%96.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>文档解析与向量化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E6%88%90/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E6%88%90.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>向量数据库集成</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>项目目录结构</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>结构总览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%89%8D%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%89%8D%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>前端目录</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%90%8E%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/%E5%90%8E%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>后端目录</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>开发指南</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>开发指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>环境搭建</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>编码规范</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>调试技巧</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/%E6%B5%8B%E8%AF%95%E7%AD%96%E7%95%A5.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>测试策略</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>部署指南</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>部署指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>开发环境部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>生产环境部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86/%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>运维管理</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>安全考虑</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>安全概述</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>API安全</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/API%E5%AE%89%E5%85%A8/API%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>API安全概览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/API%E5%AE%89%E5%85%A8/%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E4%B8%8E%E9%98%B2%E6%B3%A8%E5%85%A5.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>输入验证与防注入</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/API%E5%AE%89%E5%85%A8/%E6%B2%99%E7%AE%B1%E6%89%A7%E8%A1%8C%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>沙箱执行安全</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>数据安全</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>数据安全概览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>传输安全</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8/%E5%AF%86%E7%A0%81%E5%93%88%E5%B8%8C%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>密码哈希与加密</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>认证与授权</h3><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>认证与授权概览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/%E4%BB%A4%E7%89%8C%E7%94%9F%E6%88%90%E4%B8%8E%E9%AA%8C%E8%AF%81/%E4%BB%A4%E7%89%8C%E7%94%9F%E6%88%90%E4%B8%8E%E9%AA%8C%E8%AF%81.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>令牌生成与验证</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/AgentChat/%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91/%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>安全策略</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _AgentChat_%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84_%E5%90%8E%E7%AB%AF%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84_%E6%9C%8D%E5%8A%A1%E5%B1%82_%E6%9C%8D%E5%8A%A1%E5%B1%82" data-v-e6f2a212><div><h1 id="服务层" tabindex="-1">服务层 <a class="header-anchor" href="#服务层" aria-label="Permalink to &quot;服务层&quot;">​</a></h1><cite> **本文档引用的文件** - [agent.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/agent.py) - [chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/chat.py) - [tool.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/tool.py) - [mcp_chat.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/mcp_chat.py) - [rag_handler.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/rag_handler.py) - [manager.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/mcp/manager.py) - [client.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/memory/client.py) - [redis.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/redis.py) - [message.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/message.py) - [history.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/history.py) - [knowledge.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/knowledge.py) - [llm.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/llm.py) - [retrieval.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/retrieval.py) - [sessions.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/mcp/sessions.py) </cite><h2 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-label="Permalink to &quot;目录&quot;">​</a></h2><ol><li><a href="#概述">概述</a></li><li><a href="#服务层架构">服务层架构</a></li><li><a href="#核心业务服务模块">核心业务服务模块</a></li><li><a href="#rag服务集成">RAG服务集成</a></li><li><a href="#mcp客户端管理">MCP客户端管理</a></li><li><a href="#内存服务">内存服务</a></li><li><a href="#缓存服务">缓存服务</a></li><li><a href="#调用链路分析">调用链路分析</a></li><li><a href="#服务扩展指南">服务扩展指南</a></li><li><a href="#总结">总结</a></li></ol><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>AgentChat服务层作为系统的核心协调模块，负责封装和管理各个业务领域的核心逻辑。服务层采用模块化设计，每个模块专注于特定的业务功能，通过统一的接口为API层提供服务支持。服务层不仅实现了业务逻辑的封装，还承担着系统组件间的协调者角色，确保各子系统能够高效协作。</p><p>服务层的主要职责包括：</p><ul><li><strong>业务逻辑封装</strong>：将复杂的业务规则抽象为可复用的服务方法</li><li><strong>组件协调</strong>：连接API层与底层核心功能，充当系统的&quot;粘合剂&quot;</li><li><strong>数据转换</strong>：在不同数据格式间进行转换和标准化</li><li><strong>权限控制</strong>：实现用户权限验证和访问控制</li><li><strong>错误处理</strong>：统一的异常处理和错误响应机制</li></ul><h2 id="服务层架构" tabindex="-1">服务层架构 <a class="header-anchor" href="#服务层架构" aria-label="Permalink to &quot;服务层架构&quot;">​</a></h2><p>服务层采用分层架构设计，主要包含以下层次：</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;API层&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[路由处理器]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B[请求验证]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;服务层&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;业务服务模块&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C[AgentService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[ChatService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E[ToolService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F[KnowledgeService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G[LLMService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;基础设施服务&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H[RagHandler]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I[MCPManager]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J[MemoryClient]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">K[RedisClient]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;工具服务&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L[HistoryService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">M[MessageService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;数据层&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N[DAO层]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">O[数据库]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;外部服务&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">P[向量数据库]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Q[缓存服务]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">R[语言模型]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A --&gt; C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A --&gt; D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A --&gt; E</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; N</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D --&gt; H</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E --&gt; I</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F --&gt; J</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G --&gt; K</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H --&gt; P</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I --&gt; Q</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J --&gt; R</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/agent.py#L1-L143" target="_blank" rel="noreferrer">agent.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/chat.py#L1-L267" target="_blank" rel="noreferrer">chat.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/rag_handler.py#L1-L152" target="_blank" rel="noreferrer">rag_handler.py</a></li></ul><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/agent.py#L1-L143" target="_blank" rel="noreferrer">agent.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/chat.py#L1-L267" target="_blank" rel="noreferrer">chat.py</a></li></ul><h2 id="核心业务服务模块" tabindex="-1">核心业务服务模块 <a class="header-anchor" href="#核心业务服务模块" aria-label="Permalink to &quot;核心业务服务模块&quot;">​</a></h2><h3 id="agentservice-agent生命周期管理" tabindex="-1">AgentService - Agent生命周期管理 <a class="header-anchor" href="#agentservice-agent生命周期管理" aria-label="Permalink to &quot;AgentService - Agent生命周期管理&quot;">​</a></h3><p>AgentService负责Agent的完整生命周期管理，包括创建、更新、删除和查询等操作。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class AgentService {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+create_agent(name, description, logo_url, user_id, knowledge_ids, llm_id, tool_ids, mcp_ids, system_prompt, enable_memory, is_custom) void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_agent() Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+update_agent_by_id(id, name, description, user_id, logo_url, tool_ids, knowledge_ids, llm_id, enable_memory, mcp_ids, system_prompt) void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+delete_agent_by_id(id) void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+search_agent_name(name, user_id) Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+check_repeat_name(name, user_id) bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_personal_agent_by_user_id(user_id) Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_all_agent_by_user_id(user_id) Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+verify_user_permission(id, user_id, action) void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-get_agent_user_id(agent_id) str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-select_agent_by_custom(is_custom) Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-select_agent_by_name(name) Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-select_agent_by_id(agent_id) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class AgentDao {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+create_agent() void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_agent() Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+update_agent_by_id() void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+delete_agent_by_id() void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+search_agent_name() Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+check_repeat_name() bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_agent_by_user_id() Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+select_agent_by_custom() Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+select_agent_by_name() Agent[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+select_agent_by_id() Agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AgentService --&gt; AgentDao : 使用</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/agent.py#L9-L143" target="_blank" rel="noreferrer">agent.py</a></li></ul><p>AgentService的核心功能包括：</p><ol><li><strong>Agent创建管理</strong>：支持自定义Agent和系统Agent的创建</li><li><strong>权限验证</strong>：确保用户只能操作自己的Agent资源</li><li><strong>批量操作</strong>：支持按用户ID获取所有相关Agent</li><li><strong>重复性检查</strong>：防止创建同名Agent</li><li><strong>查询优化</strong>：提供多种查询方式满足不同场景需求</li></ol><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/agent.py#L1-L143" target="_blank" rel="noreferrer">agent.py</a></li></ul><h3 id="chatservice-对话流程协调" tabindex="-1">ChatService - 对话流程协调 <a class="header-anchor" href="#chatservice-对话流程协调" aria-label="Permalink to &quot;ChatService - 对话流程协调&quot;">​</a></h3><p>ChatService是对话系统的核心协调器，负责整合各种服务组件，提供统一的对话处理能力。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant Client as 客户端</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant ChatService as ChatService</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant AgentConfig as AgentConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant StreamingAgent as StreamingAgent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant LLMService as LLMService</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant ToolService as ToolService</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant RagHandler as RagHandler</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant MCPManager as MCPManager</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Client-&gt;&gt;ChatService : 创建对话请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatService-&gt;&gt;AgentConfig : 配置Agent参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatService-&gt;&gt;StreamingAgent : 初始化流式代理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingAgent-&gt;&gt;LLMService : 获取语言模型</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingAgent-&gt;&gt;ToolService : 加载工具集</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingAgent-&gt;&gt;RagHandler : 集成知识检索</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingAgent-&gt;&gt;MCPManager : 连接MCP服务</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingAgent--&gt;&gt;ChatService : 返回代理实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ChatService--&gt;&gt;Client : 开始流式对话</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/chat.py#L103-L267" target="_blank" rel="noreferrer">chat.py</a></li></ul><p>ChatService的关键特性：</p><ol><li><strong>流式处理</strong>：支持实时流式对话输出</li><li><strong>多模态集成</strong>：整合工具、知识库和MCP服务</li><li><strong>中间件支持</strong>：提供事件监听和模型调用监控</li><li><strong>并发处理</strong>：支持多个工具同时执行</li><li><strong>错误恢复</strong>：具备兜底机制处理模型异常</li></ol><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/chat.py#L1-L267" target="_blank" rel="noreferrer">chat.py</a></li></ul><h3 id="toolservice-工具调用管理" tabindex="-1">ToolService - 工具调用管理 <a class="header-anchor" href="#toolservice-工具调用管理" aria-label="Permalink to &quot;ToolService - 工具调用管理&quot;">​</a></h3><p>ToolService专门负责工具的生命周期管理和调用调度。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[ToolService请求] --&gt; B{权限验证}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; |通过| C[获取工具列表]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; |失败| D[抛出权限错误]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; E[工具名称解析]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E --&gt; F[工具ID映射]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F --&gt; G[工具执行]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G --&gt; H[结果返回]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I[创建工具] --&gt; J[验证用户权限]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J --&gt; K[存储工具信息]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">K --&gt; L[返回成功响应]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">M[更新工具] --&gt; N[验证所有权]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N --&gt; O[更新工具配置]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">O --&gt; P[返回更新结果]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Q[删除工具] --&gt; R[验证删除权限]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">R --&gt; S[清理工具资源]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">S --&gt; T[返回删除成功]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/tool.py#L9-L124" target="_blank" rel="noreferrer">tool.py</a></li></ul><p>ToolService的功能特点：</p><ol><li><strong>权限控制</strong>：严格的用户权限验证机制</li><li><strong>工具发现</strong>：支持按用户和系统级别查找工具</li><li><strong>批量操作</strong>：提供工具ID和名称之间的相互转换</li><li><strong>数据标准化</strong>：统一工具信息的数据格式</li><li><strong>系统集成</strong>：与Agent系统无缝对接</li></ol><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/tool.py#L1-L124" target="_blank" rel="noreferrer">tool.py</a></li></ul><h3 id="mcpchatservice-mcp对话集成" tabindex="-1">MCPChatService - MCP对话集成 <a class="header-anchor" href="#mcpchatservice-mcp对话集成" aria-label="Permalink to &quot;MCPChatService - MCP对话集成&quot;">​</a></h3><p>MCPChatService专门处理MCP（Model Context Protocol）客户端的会话管理和服务集成。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class MCPChatAgent {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+mcp_servers_id str[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+llm_id str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+enable_memory bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+knowledges_id str[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+deep_anthropic DeepAsyncAnthropic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+mcp_manager MCPManager</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+__init__(kwargs) void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+init_MCP_Server() void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+ainvoke(user_input, dialog_id, stream) Any</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_history_message(user_input, dialog_id, top_k) Dict[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_init_Anthropic() DeepAsyncAnthropic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_init_MCP_Manager() MCPManager</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_stream_response(messages) AsyncGenerator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_normal_response(messages) str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_direct_history(dialog_id, top_k) Message[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_retrieval_history(user_input, dialog_id, top_k) Message[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class MCPManager {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+multi_server_client MultiServerMCPClient</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+mcp_configs MCPBaseConfig[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+timeout int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_mcp_tools() BaseTool[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+show_mcp_tools() Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+call_mcp_tools(tools_info) Any[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class DeepAsyncAnthropic {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+invoke(messages) str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+invoke_stream(messages) AsyncGenerator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCPChatAgent --&gt; MCPManager : 使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCPChatAgent --&gt; DeepAsyncAnthropic : 使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCPManager --&gt; DeepAsyncAnthropic : 依赖</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/mcp_chat.py#L11-L85" target="_blank" rel="noreferrer">mcp_chat.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/mcp/manager.py#L13-L103" target="_blank" rel="noreferrer">manager.py</a></li></ul><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/mcp_chat.py#L1-L85" target="_blank" rel="noreferrer">mcp_chat.py</a></li></ul><h2 id="rag服务集成" tabindex="-1">RAG服务集成 <a class="header-anchor" href="#rag服务集成" aria-label="Permalink to &quot;RAG服务集成&quot;">​</a></h2><p>RagHandler是知识检索增强生成（RAG）系统的核心组件，负责整合向量数据库和全文搜索引擎。</p><h3 id="rag处理流程" tabindex="-1">RAG处理流程 <a class="header-anchor" href="#rag处理流程" aria-label="Permalink to &quot;RAG处理流程&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[用户查询] --&gt; B[查询重写]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; C[混合检索]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; D{启用ES?}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D --&gt; |是| E[ES检索]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D --&gt; |否| F[Milvus检索]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E --&gt; G[ES结果排序]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F --&gt; H[Milvus结果排序]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G --&gt; I[合并去重]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H --&gt; I</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I --&gt; J[文档重排序]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J --&gt; K[结果过滤]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">K --&gt; L[内容拼接]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L --&gt; M[返回最终结果]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N[索引管理] --&gt; O[Milvus索引]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N --&gt; P[ES索引]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">O --&gt; Q[向量相似度搜索]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">P --&gt; R[关键词匹配搜索]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/rag_handler.py#L12-L152" target="_blank" rel="noreferrer">rag_handler.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/retrieval.py#L5-L46" target="_blank" rel="noreferrer">retrieval.py</a></li></ul><p>RagHandler的核心功能：</p><ol><li><strong>多源检索</strong>：同时利用ES和Milvus进行知识检索</li><li><strong>查询重写</strong>：智能改写查询以提高检索效果</li><li><strong>结果融合</strong>：合并不同检索源的结果并去重</li><li><strong>重排序算法</strong>：使用rerank模型优化检索结果</li><li><strong>索引管理</strong>：支持文档的增删改查操作</li></ol><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/rag_handler.py#L1-L152" target="_blank" rel="noreferrer">rag_handler.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/retrieval.py#L1-L46" target="_blank" rel="noreferrer">retrieval.py</a></li></ul><h2 id="mcp客户端管理" tabindex="-1">MCP客户端管理 <a class="header-anchor" href="#mcp客户端管理" aria-label="Permalink to &quot;MCP客户端管理&quot;">​</a></h2><p>MCP（Model Context Protocol）管理器负责协调多个MCP服务器的连接和通信。</p><h3 id="mcp管理架构" tabindex="-1">MCP管理架构 <a class="header-anchor" href="#mcp管理架构" aria-label="Permalink to &quot;MCP管理架构&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;MCP Manager&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[MCPManager]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B[MultiServerMCPClient]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C[连接池管理]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;MCP服务器&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[Weather Server]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E[AirXiv Server]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F[Lark MCP Server]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G[Custom Server]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;传输协议&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H[Stdio Transport]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I[SSE Transport]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J[WebSocket Transport]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">K[Streamable HTTP Transport]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A --&gt; B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; E</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; F</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D --&gt; H</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E --&gt; I</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F --&gt; J</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G --&gt; K</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/mcp/manager.py#L13-L103" target="_blank" rel="noreferrer">manager.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/mcp/sessions.py#L1-L412" target="_blank" rel="noreferrer">sessions.py</a></li></ul><p>MCPManager的关键特性：</p><ol><li><strong>多服务器支持</strong>：同时管理多个MCP服务器连接</li><li><strong>异步工具调用</strong>：支持并发执行多个MCP工具</li><li><strong>传输协议适配</strong>：支持多种MCP传输协议</li><li><strong>连接状态管理</strong>：维护服务器连接的健康状态</li><li><strong>工具发现机制</strong>：动态获取服务器提供的工具列表</li></ol><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/mcp/manager.py#L1-L103" target="_blank" rel="noreferrer">manager.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/mcp/sessions.py#L1-L412" target="_blank" rel="noreferrer">sessions.py</a></li></ul><h2 id="内存服务" tabindex="-1">内存服务 <a class="header-anchor" href="#内存服务" aria-label="Permalink to &quot;内存服务&quot;">​</a></h2><p>MemoryClient提供了完整的记忆管理系统，支持语义记忆、情节记忆和程序记忆。</p><h3 id="内存类型与管理" tabindex="-1">内存类型与管理 <a class="header-anchor" href="#内存类型与管理" aria-label="Permalink to &quot;内存类型与管理&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class AsyncMemory {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+embedding_model EmbeddingModel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+vector_store VectorStore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+llm BaseChatModel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+db MemoryHistoryDao</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+enable_graph bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+add(messages, user_id, agent_id, run_id, metadata, infer, memory_type, prompt, llm) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get(memory_id) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_all(user_id, agent_id, run_id, filters, limit) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+search(query, user_id, agent_id, run_id, limit, filters, threshold) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+update(memory_id, data) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+delete(memory_id) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+delete_all(user_id, agent_id, run_id) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+history(memory_id) List</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_create_memory(data, existing_embeddings, metadata) str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_update_memory(memory_id, data, existing_embeddings, metadata) void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_delete_memory(memory_id) void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_create_procedural_memory(messages, metadata, llm, prompt) Dict</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_add_to_vector_store(messages, metadata, effective_filters, infer) List</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_add_to_graph(messages, filters) List</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_get_all_from_vector_store(filters, limit) List</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-_search_vector_store(query, filters, limit, threshold) List</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class MemoryType {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;&lt;enumeration&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SEMANTIC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EPISODIC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PROCEDURAL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">class VectorStoreManager {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_chroma_vector() ChromaVectorStore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+get_milvus_vector() MilvusVectorStore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AsyncMemory --&gt; MemoryType : 使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AsyncMemory --&gt; VectorStoreManager : 依赖</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/memory/client.py#L118-L865" target="_blank" rel="noreferrer">client.py</a></li></ul><p>MemoryClient的核心功能：</p><ol><li><strong>多类型记忆</strong>：支持语义、情节和程序三种记忆类型</li><li><strong>向量化存储</strong>：使用嵌入模型将文本转换为向量存储</li><li><strong>智能推理</strong>：自动从对话中提取新事实并更新记忆</li><li><strong>历史追踪</strong>：记录记忆的变更历史</li><li><strong>关系图谱</strong>：支持记忆间的关联关系建模</li></ol><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/memory/client.py#L1-L865" target="_blank" rel="noreferrer">client.py</a></li></ul><h2 id="缓存服务" tabindex="-1">缓存服务 <a class="header-anchor" href="#缓存服务" aria-label="Permalink to &quot;缓存服务&quot;">​</a></h2><p>RedisClient提供了高性能的缓存服务，主要用于会话状态管理和临时数据存储。</p><h3 id="缓存服务功能" tabindex="-1">缓存服务功能 <a class="header-anchor" href="#缓存服务功能" aria-label="Permalink to &quot;缓存服务功能&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[RedisClient请求] --&gt; B{操作类型}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; |SET| C[设置键值对]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; |GET| D[获取键值]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; |DEL| E[删除键]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; |HSET| F[哈希表操作]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; |INCR| G[原子计数器]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; H[序列化数据]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D --&gt; I[反序列化数据]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E --&gt; J[确认删除]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F --&gt; K[哈希字段操作]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G --&gt; L[递增计数]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H --&gt; M[设置过期时间]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I --&gt; N[返回原始数据]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J --&gt; O[返回删除结果]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">K --&gt; P[返回操作状态]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L --&gt; Q[返回新值]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>图表来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/redis.py#L12-L115" target="_blank" rel="noreferrer">redis.py</a></li></ul><p>RedisClient的特点：</p><ol><li><strong>多种数据结构</strong>：支持字符串、哈希表、列表等多种数据类型</li><li><strong>自动序列化</strong>：透明地处理Python对象的序列化和反序列化</li><li><strong>过期策略</strong>：支持设置键的生存时间</li><li><strong>原子操作</strong>：提供原子性的计数器操作</li><li><strong>连接池管理</strong>：高效的连接池和资源管理</li></ol><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/services/redis.py#L1-L115" target="_blank" rel="noreferrer">redis.py</a></li></ul><h2 id="调用链路分析" tabindex="-1">调用链路分析 <a class="header-anchor" href="#调用链路分析" aria-label="Permalink to &quot;调用链路分析&quot;">​</a></h2><p>服务层作为API接口与底层核心功能之间的桥梁，其调用链路体现了系统的整体架构设计。</p><h3 id="典型调用流程" tabindex="-1">典型调用流程 <a class="header-anchor" href="#典型调用流程" aria-label="Permalink to &quot;典型调用流程&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant API as API层</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant Service as 服务层</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant Core as 核心组件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant DB as 数据库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participant External as 外部服务</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">API-&gt;&gt;Service : 接收用户请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Service-&gt;&gt;Service : 参数验证和预处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Service-&gt;&gt;Service : 权限检查</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Service-&gt;&gt;Core : 调用核心业务逻辑</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Core-&gt;&gt;DB : 数据持久化</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Core-&gt;&gt;External : 外部服务调用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">External--&gt;&gt;Core : 返回服务响应</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB--&gt;&gt;Core : 确认数据保存</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Core--&gt;&gt;Service : 返回业务结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Service-&gt;&gt;Service : 结果后处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Service--&gt;&gt;API : 返回标准化响应</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">API--&gt;&gt;Client : 响应用户请求</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="服务层职责映射" tabindex="-1">服务层职责映射 <a class="header-anchor" href="#服务层职责映射" aria-label="Permalink to &quot;服务层职责映射&quot;">​</a></h3><table tabindex="0"><thead><tr><th>服务层模块</th><th>主要职责</th><th>协调的对象</th></tr></thead><tbody><tr><td>AgentService</td><td>Agent生命周期管理</td><td>AgentDao, 权限验证</td></tr><tr><td>ChatService</td><td>对话流程协调</td><td>LLMService, ToolService, RagHandler, MCPManager</td></tr><tr><td>ToolService</td><td>工具管理</td><td>ToolDao, 权限控制</td></tr><tr><td>KnowledgeService</td><td>知识库管理</td><td>KnowledgeDao, 文件处理</td></tr><tr><td>LLMService</td><td>模型管理</td><td>模型提供商API</td></tr><tr><td>HistoryService</td><td>历史记录管理</td><td>数据库, 向量存储</td></tr><tr><td>MessageService</td><td>消息反馈管理</td><td>数据库</td></tr><tr><td>MemoryClient</td><td>记忆管理</td><td>向量数据库, 嵌入模型</td></tr><tr><td>RedisClient</td><td>缓存管理</td><td>Redis服务器</td></tr></tbody></table><p><strong>章节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/agent.py#L1-L143" target="_blank" rel="noreferrer">agent.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/chat.py#L1-L267" target="_blank" rel="noreferrer">chat.py</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/api/services/tool.py#L1-L124" target="_blank" rel="noreferrer">tool.py</a></li></ul><h2 id="服务扩展指南" tabindex="-1">服务扩展指南 <a class="header-anchor" href="#服务扩展指南" aria-label="Permalink to &quot;服务扩展指南&quot;">​</a></h2><h3 id="添加新业务服务模块" tabindex="-1">添加新业务服务模块 <a class="header-anchor" href="#添加新业务服务模块" aria-label="Permalink to &quot;添加新业务服务模块&quot;">​</a></h3><p>要向服务层添加新的业务服务模块，需要遵循以下步骤：</p><h4 id="_1-创建服务类" tabindex="-1">1. 创建服务类 <a class="header-anchor" href="#_1-创建服务类" aria-label="Permalink to &quot;1. 创建服务类&quot;">​</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 示例：创建一个新的服务类</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NewService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">classmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_new_resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cls, user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data: Dict):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 1. 权限验证</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 2. 参数验证</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 3. 业务逻辑处理</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 4. 数据持久化</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 5. 返回结果</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        pass</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">classmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_new_resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cls, user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, filters: Dict):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 实现资源查询功能</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        pass</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_2-集成到现有架构" tabindex="-1">2. 集成到现有架构 <a class="header-anchor" href="#_2-集成到现有架构" aria-label="Permalink to &quot;2. 集成到现有架构&quot;">​</a></h4><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;新增服务&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[NewService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B[NewDao]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C[NewModel]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;现有服务层&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[AgentService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E[ChatService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F[ToolService]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;数据层&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G[DAO层]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H[数据库]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A --&gt; B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G --&gt; H</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A -.-&gt; D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A -.-&gt; E</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A -.-&gt; F</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="_3-配置依赖注入" tabindex="-1">3. 配置依赖注入 <a class="header-anchor" href="#_3-配置依赖注入" aria-label="Permalink to &quot;3. 配置依赖注入&quot;">​</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在适当的位置注册新服务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">staticmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(service_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        services </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;new_service&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: NewService,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 其他服务...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> services.get(service_name)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_4-添加api路由" tabindex="-1">4. 添加API路由 <a class="header-anchor" href="#_4-添加api路由" aria-label="Permalink to &quot;4. 添加API路由&quot;">​</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在API层添加新的路由</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> APIRouter()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@router.post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/new-resources&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_new_resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Depends(get_current_user),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data: NewResourceSchema </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Body(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NewService.create_new_resource(user_id, data)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="扩展服务功能的最佳实践" tabindex="-1">扩展服务功能的最佳实践 <a class="header-anchor" href="#扩展服务功能的最佳实践" aria-label="Permalink to &quot;扩展服务功能的最佳实践&quot;">​</a></h3><ol><li><strong>单一职责原则</strong>：每个服务类只负责一个特定的业务领域</li><li><strong>依赖倒置</strong>：通过接口或抽象基类定义依赖关系</li><li><strong>异常处理</strong>：统一的异常处理和错误响应机制</li><li><strong>日志记录</strong>：详细的日志记录便于调试和监控</li><li><strong>测试覆盖</strong>：为每个服务方法编写单元测试</li></ol><h3 id="性能优化建议" tabindex="-1">性能优化建议 <a class="header-anchor" href="#性能优化建议" aria-label="Permalink to &quot;性能优化建议&quot;">​</a></h3><ol><li><strong>异步编程</strong>：充分利用异步I/O提升并发性能</li><li><strong>连接池</strong>：合理使用数据库和外部服务的连接池</li><li><strong>缓存策略</strong>：对频繁访问的数据实施缓存</li><li><strong>批量操作</strong>：减少数据库往返次数</li><li><strong>资源管理</strong>：及时释放不再使用的资源</li></ol><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>AgentChat服务层通过模块化设计实现了高度的可维护性和可扩展性。各个服务模块各司其职，既保持了独立性又确保了良好的协作性。服务层作为系统的核心协调者，不仅封装了复杂的业务逻辑，还为上层API提供了简洁统一的接口。</p><h3 id="关键优势" tabindex="-1">关键优势 <a class="header-anchor" href="#关键优势" aria-label="Permalink to &quot;关键优势&quot;">​</a></h3><ol><li><strong>清晰的职责分离</strong>：每个服务模块专注于特定的业务功能</li><li><strong>强大的扩展性</strong>：模块化设计便于添加新的业务功能</li><li><strong>高效的协作机制</strong>：通过统一的接口实现组件间的协调</li><li><strong>完善的错误处理</strong>：统一的异常处理确保系统的稳定性</li><li><strong>灵活的配置管理</strong>：支持多种部署和运行时配置</li></ol><h3 id="技术特色" tabindex="-1">技术特色 <a class="header-anchor" href="#技术特色" aria-label="Permalink to &quot;技术特色&quot;">​</a></h3><ul><li><strong>异步架构</strong>：充分利用异步编程提升系统性能</li><li><strong>多模态集成</strong>：支持文本、图像等多种输入形式</li><li><strong>智能记忆系统</strong>：提供长期记忆和短期记忆管理</li><li><strong>知识检索增强</strong>：深度集成RAG技术提升对话质量</li><li><strong>MCP协议支持</strong>：原生支持Model Context Protocol</li></ul><p>服务层的设计充分体现了现代软件架构的最佳实践，为构建高质量的AI对话系统奠定了坚实的基础。通过持续的优化和扩展，服务层将继续支撑AgentChat系统的发展和演进。</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Shy2593666979/AgentChat/edit/main/docs/项目目录结构/后端目录结构/服务层/服务层.md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>最后更新于: <time datetime="2025-11-27T11:56:00.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/AgentChat/%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>系统概述</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>基于 MIT 许可发布</p><p class="copyright" data-v-566314d4>Copyright © 2024 AgentChat</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api参考_agent api.md\":\"D2CIPrUy\",\"api参考_api参考.md\":\"CZJKKorM\",\"api参考_mcp服务api.md\":\"D-sKYUa8\",\"api参考_对话api.md\":\"DsM9KVnj\",\"api参考_工具api.md\":\"B81iph0X\",\"api参考_用户api.md\":\"CJ-UWRc3\",\"api参考_知识库api.md\":\"D1WBwKZc\",\"index.md\":\"CUAtgmo1\",\"sidebar.md\":\"Bdd4goLw\",\"安全考虑_api安全_api安全.md\":\"D6jvKvDB\",\"安全考虑_api安全_沙箱执行安全.md\":\"CurB-Lpy\",\"安全考虑_api安全_输入验证与防注入.md\":\"UK65KkhN\",\"安全考虑_安全考虑.md\":\"eICegvH8\",\"安全考虑_数据安全_传输安全.md\":\"hc80Xk-J\",\"安全考虑_数据安全_密码哈希与数据加密.md\":\"ClnazI--\",\"安全考虑_数据安全_数据安全.md\":\"BWCbl2_R\",\"安全考虑_认证与授权_令牌生成与验证_令牌刷新与失效.md\":\"B7UZQkFX\",\"安全考虑_认证与授权_令牌生成与验证_令牌生成与验证.md\":\"5mCx7B7c\",\"安全考虑_认证与授权_令牌生成与验证_令牌生成机制.md\":\"PWAqwm2k\",\"安全考虑_认证与授权_令牌生成与验证_令牌验证流程.md\":\"DjyIPzHV\",\"安全考虑_认证与授权_安全策略_csrf策略.md\":\"BphO8y2X\",\"安全考虑_认证与授权_安全策略_传输安全.md\":\"DUw1pXPe\",\"安全考虑_认证与授权_安全策略_安全策略.md\":\"T1jRV-uY\",\"安全考虑_认证与授权_安全策略_访问控制.md\":\"zGVYpF27\",\"安全考虑_认证与授权_认证与授权.md\":\"2fdb60gA\",\"安全考虑_认证与授权_认证配置.md\":\"B6aTztY3\",\"安全考虑_访问控制.md\":\"DVDnCZpy\",\"开发指南_开发指南.md\":\"BA1-UXfN\",\"开发指南_测试策略.md\":\"CgxEnL5f\",\"开发指南_环境搭建.md\":\"DeS6hV3m\",\"开发指南_编码规范.md\":\"z6ebHdvu\",\"开发指南_调试技巧.md\":\"DZ4hQnQd\",\"快速入门.md\":\"D-dcv3T2\",\"技术栈.md\":\"CNqAg4YT\",\"数据库设计_关系型数据模型_mcp服务配置模型.md\":\"nae7OTAf\",\"数据库设计_关系型数据模型_关系型数据模型.md\":\"B_yVx3wS\",\"数据库设计_关系型数据模型_对话会话数据模型.md\":\"DslMDH-l\",\"数据库设计_关系型数据模型_工作区会话模型.md\":\"XVAyHn5X\",\"数据库设计_关系型数据模型_工具定义数据模型.md\":\"PTE4ZW5S\",\"数据库设计_关系型数据模型_智能体数据模型.md\":\"TFUzwF9a\",\"数据库设计_关系型数据模型_消息记录数据模型.md\":\"D1QVvi04\",\"数据库设计_关系型数据模型_用户数据模型.md\":\"D2FxiMeH\",\"数据库设计_关系型数据模型_知识库数据模型.md\":\"CJDamPYf\",\"数据库设计_关系型数据模型_知识文件数据模型.md\":\"JPNLnCfS\",\"数据库设计_向量存储架构_elasticsearch配置.md\":\"Dqotuqc9\",\"数据库设计_向量存储架构_向量存储架构.md\":\"2aiYkPtO\",\"数据库设计_向量存储架构_向量数据库集成_chromadb 集成.md\":\"Dg7CYOYn\",\"数据库设计_向量存储架构_向量数据库集成_milvus 集成.md\":\"MNcWazi4\",\"数据库设计_向量存储架构_向量数据库集成_向量数据库集成.md\":\"BhD3lgnn\",\"数据库设计_向量存储架构_文档解析与向量化_文本向量化.md\":\"DYPEc2p8\",\"数据库设计_向量存储架构_文档解析与向量化_文档解析.md\":\"eugCxbdV\",\"数据库设计_向量存储架构_文档解析与向量化_文档解析与向量化.md\":\"CxJnV3gJ\",\"数据库设计_数据库设计.md\":\"Dr4s9d9W\",\"核心功能模块_mcp集成.md\":\"DnCXnEEQ\",\"核心功能模块_多agent系统.md\":\"CGwRF2f0\",\"核心功能模块_工具生态系统.md\":\"Bxwz8TfU\",\"核心功能模块_核心功能模块.md\":\"DP38awP3\",\"核心功能模块_知识库系统.md\":\"BCZv4iWe\",\"系统概述.md\":\"CjWGYJMo\",\"部署指南_开发环境部署.md\":\"BuscYVkx\",\"部署指南_生产环境部署_反向代理配置.md\":\"DDapKtXk\",\"部署指南_生产环境部署_安全加固.md\":\"BO5F5kvV\",\"部署指南_生产环境部署_生产服务配置.md\":\"pHi65XrN\",\"部署指南_生产环境部署_生产环境部署.md\":\"CkKhRv8n\",\"部署指南_运维管理_备份与恢复.md\":\"Dywad3yC\",\"部署指南_运维管理_服务管理.md\":\"D8yOOwfa\",\"部署指南_运维管理_监控与维护.md\":\"Dzhw9Cq1\",\"部署指南_运维管理_运维管理.md\":\"0uxg3SeY\",\"部署指南_部署指南.md\":\"CvYzzVv7\",\"项目目录结构_前端目录结构_api集成.md\":\"xXvFIb_P\",\"项目目录结构_前端目录结构_ui组件体系.md\":\"BsaJY1C4\",\"项目目录结构_前端目录结构_前端目录结构.md\":\"BkQb4CPW\",\"项目目录结构_前端目录结构_状态管理.md\":\"CAC1XZs-\",\"项目目录结构_前端目录结构_路由与导航.md\":\"BJKxMiWl\",\"项目目录结构_后端目录结构_api层.md\":\"5lcWYiYc\",\"项目目录结构_后端目录结构_后端目录结构.md\":\"C8cCRvnS\",\"项目目录结构_后端目录结构_数据层.md\":\"-25WgsXl\",\"项目目录结构_后端目录结构_服务层_mcp服务.md\":\"DCCZhgzp\",\"项目目录结构_后端目录结构_服务层_rag服务.md\":\"DzZ0swgT\",\"项目目录结构_后端目录结构_服务层_服务层.md\":\"bf4uEXwK\",\"项目目录结构_后端目录结构_服务层_核心服务.md\":\"BklcMFLE\",\"项目目录结构_后端目录结构_服务层_记忆服务.md\":\"CG2eQdOQ\",\"项目目录结构_后端目录结构_核心功能层_react智能体.md\":\"CV_W0UnE\",\"项目目录结构_后端目录结构_核心功能层_核心功能层.md\":\"2gE-OFUE\",\"项目目录结构_后端目录结构_核心功能层_统一模型管理器.md\":\"Cdy3IeEl\",\"项目目录结构_后端目录结构_核心功能层_计划-执行智能体.md\":\"CEApKGKB\",\"项目目录结构_项目目录结构.md\":\"BaGZY1lH\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"AgentChat\",\"description\":\"基于大语言模型的智能对话系统技术文档\",\"base\":\"/AgentChat/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"快速入门\",\"link\":\"/快速入门\"},{\"text\":\"系统概述\",\"link\":\"/系统概述\"},{\"text\":\"技术栈\",\"link\":\"/技术栈\"},{\"text\":\"核心功能\",\"items\":[{\"text\":\"多Agent系统\",\"link\":\"/核心功能模块/多Agent系统\"},{\"text\":\"MCP集成\",\"link\":\"/核心功能模块/MCP集成\"},{\"text\":\"知识库系统\",\"link\":\"/核心功能模块/知识库系统\"},{\"text\":\"工具生态系统\",\"link\":\"/核心功能模块/工具生态系统\"}]},{\"text\":\"API文档\",\"items\":[{\"text\":\"API总览\",\"link\":\"/API参考/API参考\"},{\"text\":\"Agent API\",\"link\":\"/API参考/Agent API\"},{\"text\":\"对话 API\",\"link\":\"/API参考/对话API\"},{\"text\":\"知识库 API\",\"link\":\"/API参考/知识库API\"}]},{\"text\":\"开发指南\",\"items\":[{\"text\":\"环境搭建\",\"link\":\"/开发指南/环境搭建\"},{\"text\":\"编码规范\",\"link\":\"/开发指南/编码规范\"},{\"text\":\"调试技巧\",\"link\":\"/开发指南/调试技巧\"}]}],\"sidebar\":{\"/\":[{\"text\":\"入门与概览\",\"collapsed\":false,\"items\":[{\"text\":\"系统概述\",\"link\":\"/系统概述\"},{\"text\":\"快速入门\",\"link\":\"/快速入门\"},{\"text\":\"技术栈\",\"link\":\"/技术栈\"}]},{\"text\":\"核心功能模块\",\"collapsed\":false,\"items\":[{\"text\":\"核心功能模块\",\"link\":\"/核心功能模块/核心功能模块\"},{\"text\":\"多Agent系统\",\"link\":\"/核心功能模块/多Agent系统\"},{\"text\":\"MCP集成\",\"link\":\"/核心功能模块/MCP集成\"},{\"text\":\"工具生态系统\",\"link\":\"/核心功能模块/工具生态系统\"},{\"text\":\"知识库系统\",\"link\":\"/核心功能模块/知识库系统\"}]},{\"text\":\"API 参考\",\"collapsed\":true,\"items\":[{\"text\":\"API总览\",\"link\":\"/API参考/API参考\"},{\"text\":\"Agent API\",\"link\":\"/API参考/Agent API\"},{\"text\":\"对话 API\",\"link\":\"/API参考/对话API\"},{\"text\":\"工具 API\",\"link\":\"/API参考/工具API\"},{\"text\":\"用户 API\",\"link\":\"/API参考/用户API\"},{\"text\":\"知识库 API\",\"link\":\"/API参考/知识库API\"},{\"text\":\"MCP服务 API\",\"link\":\"/API参考/MCP服务API\"}]},{\"text\":\"数据库设计\",\"collapsed\":true,\"items\":[{\"text\":\"设计总览\",\"link\":\"/数据库设计/数据库设计\"},{\"text\":\"关系型数据模型\",\"items\":[{\"text\":\"模型总览\",\"link\":\"/数据库设计/关系型数据模型/关系型数据模型\"},{\"text\":\"用户数据模型\",\"link\":\"/数据库设计/关系型数据模型/用户数据模型\"},{\"text\":\"智能体数据模型\",\"link\":\"/数据库设计/关系型数据模型/智能体数据模型\"},{\"text\":\"对话会话模型\",\"link\":\"/数据库设计/关系型数据模型/对话会话数据模型\"},{\"text\":\"消息记录模型\",\"link\":\"/数据库设计/关系型数据模型/消息记录数据模型\"},{\"text\":\"知识库模型\",\"link\":\"/数据库设计/关系型数据模型/知识库数据模型\"},{\"text\":\"MCP服务配置\",\"link\":\"/数据库设计/关系型数据模型/MCP服务配置模型\"}]},{\"text\":\"向量存储架构\",\"items\":[{\"text\":\"架构总览\",\"link\":\"/数据库设计/向量存储架构/向量存储架构\"},{\"text\":\"文档解析与向量化\",\"link\":\"/数据库设计/向量存储架构/文档解析与向量化/文档解析与向量化\"},{\"text\":\"向量数据库集成\",\"link\":\"/数据库设计/向量存储架构/向量数据库集成/向量数据库集成\"}]}]},{\"text\":\"项目目录结构\",\"collapsed\":true,\"items\":[{\"text\":\"结构总览\",\"link\":\"/项目目录结构/项目目录结构\"},{\"text\":\"前端目录\",\"link\":\"/项目目录结构/前端目录结构/前端目录结构\"},{\"text\":\"后端目录\",\"link\":\"/项目目录结构/后端目录结构/后端目录结构\"}]},{\"text\":\"开发指南\",\"collapsed\":true,\"items\":[{\"text\":\"开发指南\",\"link\":\"/开发指南/开发指南\"},{\"text\":\"环境搭建\",\"link\":\"/开发指南/环境搭建\"},{\"text\":\"编码规范\",\"link\":\"/开发指南/编码规范\"},{\"text\":\"调试技巧\",\"link\":\"/开发指南/调试技巧\"},{\"text\":\"测试策略\",\"link\":\"/开发指南/测试策略\"}]},{\"text\":\"部署指南\",\"collapsed\":true,\"items\":[{\"text\":\"部署指南\",\"link\":\"/部署指南/部署指南\"},{\"text\":\"开发环境部署\",\"link\":\"/部署指南/开发环境部署\"},{\"text\":\"生产环境部署\",\"link\":\"/部署指南/生产环境部署/生产环境部署\"},{\"text\":\"运维管理\",\"link\":\"/部署指南/运维管理/运维管理\"}]},{\"text\":\"安全考虑\",\"collapsed\":true,\"items\":[{\"text\":\"安全概述\",\"link\":\"/安全考虑/安全考虑\"},{\"text\":\"API安全\",\"items\":[{\"text\":\"API安全概览\",\"link\":\"/安全考虑/API安全/API安全\"},{\"text\":\"输入验证与防注入\",\"link\":\"/安全考虑/API安全/输入验证与防注入\"},{\"text\":\"沙箱执行安全\",\"link\":\"/安全考虑/API安全/沙箱执行安全\"}]},{\"text\":\"数据安全\",\"items\":[{\"text\":\"数据安全概览\",\"link\":\"/安全考虑/数据安全/数据安全\"},{\"text\":\"传输安全\",\"link\":\"/安全考虑/数据安全/传输安全\"},{\"text\":\"密码哈希与加密\",\"link\":\"/安全考虑/数据安全/密码哈希与数据加密\"}]},{\"text\":\"认证与授权\",\"items\":[{\"text\":\"认证与授权概览\",\"link\":\"/安全考虑/认证与授权/认证与授权\"},{\"text\":\"令牌生成与验证\",\"link\":\"/安全考虑/认证与授权/令牌生成与验证/令牌生成与验证\"},{\"text\":\"安全策略\",\"link\":\"/安全考虑/认证与授权/安全策略/安全策略\"}]}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Shy2593666979/AgentChat\"}],\"footer\":{\"message\":\"基于 MIT 许可发布\",\"copyright\":\"Copyright © 2024 AgentChat\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}},\"editLink\":{\"pattern\":\"https://github.com/Shy2593666979/AgentChat/edit/main/docs/:path\",\"text\":\"在 GitHub 上编辑此页面\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>