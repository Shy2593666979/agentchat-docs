import{_ as a,c as n,o as e,ag as i}from"./chunks/framework.D0TaUBpX.js";const k=JSON.parse('{"title":"运维管理","description":"","frontmatter":{},"headers":[],"relativePath":"部署指南/运维管理/运维管理.md","filePath":"部署指南/运维管理/运维管理.md","lastUpdated":1764244560000}'),l={name:"部署指南/运维管理/运维管理.md"};function t(r,s,p,h,o,c){return e(),n("div",null,[...s[0]||(s[0]=[i(`<h1 id="运维管理" tabindex="-1">运维管理 <a class="header-anchor" href="#运维管理" aria-label="Permalink to &quot;运维管理&quot;">​</a></h1><cite> **本文档引用的文件** - [start.sh](https://github.com/Shy2593666979/AgentChat/docker/start.sh) - [stop.sh](https://github.com/Shy2593666979/AgentChat/docker/stop.sh) - [docker-compose.yml](https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml) - [docker-compose.prod.yml](https://github.com/Shy2593666979/AgentChat/docker/docker-compose.prod.yml) - [docker.env.example](https://github.com/Shy2593666979/AgentChat/docker/docker.env.example) - [nginx.conf](https://github.com/Shy2593666979/AgentChat/docker/nginx.conf) - [main.py](https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py) </cite><h2 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-label="Permalink to &quot;目录&quot;">​</a></h2><ol><li><a href="#简介">简介</a></li><li><a href="#项目结构">项目结构</a></li><li><a href="#核心组件">核心组件</a></li><li><a href="#架构概述">架构概述</a></li><li><a href="#详细组件分析">详细组件分析</a></li><li><a href="#依赖分析">依赖分析</a></li><li><a href="#性能考虑">性能考虑</a></li><li><a href="#故障排除指南">故障排除指南</a></li><li><a href="#结论">结论</a></li><li><a href="#附录">附录</a>（如有必要）</li></ol><h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h2><p>本文档为系统管理员提供AgentChat系统的全面运维操作指南。文档详细说明了服务的启动与停止流程、日志管理、容器监控、环境变量配置、数据备份与恢复策略、版本更新与回滚操作，以及关键监控指标和告警阈值建议。通过本手册，管理员可以有效地管理和维护AgentChat系统，确保服务的稳定性和连续性。</p><h2 id="项目结构" tabindex="-1">项目结构 <a class="header-anchor" href="#项目结构" aria-label="Permalink to &quot;项目结构&quot;">​</a></h2><p>AgentChat项目采用模块化设计，主要分为Docker配置、脚本、后端和前端四个部分。Docker配置文件位于<code>docker</code>目录下，包括Dockerfile、docker-compose文件和启动/停止脚本。脚本文件位于<code>scripts</code>目录，主要用于系统维护。后端代码位于<code>src/backend</code>目录，采用FastAPI框架构建RESTful API服务。前端代码位于<code>src/frontend</code>目录，使用Vue3和Vite构建用户界面。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;Docker配置&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[Dockerfile]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B[docker-compose.yml]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C[start.sh]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[stop.sh]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;脚本&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E[fix_fastapi_jwt_auth.py]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F[start.py]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;后端&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">G[FastAPI]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H[数据库]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I[AI服务]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subgraph &quot;前端&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J[Vue3]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">K[Vite]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C --&gt; B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D --&gt; B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">H --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">I --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">J --&gt; G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">K --&gt; J</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L7-L125" target="_blank" rel="noreferrer">docker-compose.yml</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/docker/Dockerfile#L1-L39" target="_blank" rel="noreferrer">Dockerfile</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker" target="_blank" rel="noreferrer">docker</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/scripts" target="_blank" rel="noreferrer">scripts</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend" target="_blank" rel="noreferrer">src/backend</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/frontend" target="_blank" rel="noreferrer">src/frontend</a></li></ul><h2 id="核心组件" tabindex="-1">核心组件 <a class="header-anchor" href="#核心组件" aria-label="Permalink to &quot;核心组件&quot;">​</a></h2><p>AgentChat系统的核心组件包括MySQL数据库、Redis缓存、后端API服务和前端界面。MySQL用于持久化存储用户数据、对话记录和知识库信息。Redis用于缓存会话数据和提高系统性能。后端API服务基于FastAPI框架，提供RESTful接口供前端调用。前端界面使用Vue3和Vite构建，提供用户友好的交互体验。</p><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L9-L119" target="_blank" rel="noreferrer">docker-compose.yml</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py#L1-L108" target="_blank" rel="noreferrer">main.py</a></li></ul><h2 id="架构概述" tabindex="-1">架构概述 <a class="header-anchor" href="#架构概述" aria-label="Permalink to &quot;架构概述&quot;">​</a></h2><p>AgentChat系统采用微服务架构，通过Docker容器化部署。系统由前端、后端、数据库和缓存四个主要服务组成，通过Docker Compose进行编排和管理。前端服务通过HTTP请求与后端API服务通信，后端服务则与MySQL数据库和Redis缓存交互，实现数据的持久化存储和高效访问。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[前端界面] --&gt; B[后端API]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; C[MySQL数据库]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; D[Redis缓存]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style A fill:#4FC08D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style B fill:#009688</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style C fill:#4479A1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style D fill:#DC382D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L7-L125" target="_blank" rel="noreferrer">docker-compose.yml</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/src/backend/agentchat/main.py#L1-L108" target="_blank" rel="noreferrer">main.py</a></li></ul><h2 id="详细组件分析" tabindex="-1">详细组件分析 <a class="header-anchor" href="#详细组件分析" aria-label="Permalink to &quot;详细组件分析&quot;">​</a></h2><h3 id="启动脚本分析" tabindex="-1">启动脚本分析 <a class="header-anchor" href="#启动脚本分析" aria-label="Permalink to &quot;启动脚本分析&quot;">​</a></h3><p><code>start.sh</code>脚本用于启动AgentChat系统的所有服务。脚本首先检查环境变量配置文件<code>docker.env</code>是否存在，如果不存在则从<code>docker.env.example</code>复制并提示用户编辑。然后创建必要的数据目录，最后使用<code>docker-compose</code>命令构建并启动所有服务。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Start([开始]) --&gt; CheckEnv[&quot;检查环境变量文件&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CheckEnv --&gt; EnvExists{&quot;文件存在?&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EnvExists --&gt; |否| CreateEnv[&quot;创建docker.env文件&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CreateEnv --&gt; EditEnv[&quot;提示用户编辑配置&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EditEnv --&gt; Exit[&quot;退出脚本&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EnvExists --&gt; |是| CreateDirs[&quot;创建数据目录&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CreateDirs --&gt; BuildStart[&quot;构建并启动服务&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BuildStart --&gt; WaitStart[&quot;等待服务启动&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WaitStart --&gt; CheckStatus[&quot;检查服务状态&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CheckStatus --&gt; ShowInfo[&quot;显示访问信息&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ShowInfo --&gt; End([结束])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/start.sh#L1-L52" target="_blank" rel="noreferrer">start.sh</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/start.sh#L1-L52" target="_blank" rel="noreferrer">start.sh</a></li></ul><h3 id="停止脚本分析" tabindex="-1">停止脚本分析 <a class="header-anchor" href="#停止脚本分析" aria-label="Permalink to &quot;停止脚本分析&quot;">​</a></h3><p><code>stop.sh</code>脚本用于停止AgentChat系统的所有服务。脚本首先使用<code>docker-compose down</code>命令停止所有容器，然后询问用户是否删除数据卷和构建缓存。如果用户选择删除，则执行<code>docker-compose down -v</code>命令清理数据卷，并使用<code>docker system prune -f</code>命令删除构建缓存。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Start([开始]) --&gt; StopContainers[&quot;停止所有容器&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StopContainers --&gt; AskDelete[&quot;询问是否删除数据&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AskDelete --&gt; UserInput{&quot;用户选择删除?&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserInput --&gt; |是| CleanVolumes[&quot;清理数据卷&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CleanVolumes --&gt; CleanCache[&quot;删除构建缓存&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CleanCache --&gt; ShowComplete[&quot;显示清理完成&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserInput --&gt; |否| ShowPreserved[&quot;显示数据保留&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ShowComplete --&gt; End([结束])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ShowPreserved --&gt; End</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/stop.sh#L1-L35" target="_blank" rel="noreferrer">stop.sh</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/stop.sh#L1-L35" target="_blank" rel="noreferrer">stop.sh</a></li></ul><h2 id="依赖分析" tabindex="-1">依赖分析 <a class="header-anchor" href="#依赖分析" aria-label="Permalink to &quot;依赖分析&quot;">​</a></h2><p>AgentChat系统的组件之间存在明确的依赖关系。后端服务依赖于MySQL数据库和Redis缓存，前端服务依赖于后端API服务。Docker Compose文件中通过<code>depends_on</code>指令定义了这些依赖关系，确保服务按正确的顺序启动。</p><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[前端] --&gt; B[后端]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; C[MySQL]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">B --&gt; D[Redis]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style A fill:#4FC08D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style B fill:#009688</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style C fill:#4479A1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style D fill:#DC382D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>图示来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L7-L125" target="_blank" rel="noreferrer">docker-compose.yml</a></li></ul><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L7-L125" target="_blank" rel="noreferrer">docker-compose.yml</a></li></ul><h2 id="性能考虑" tabindex="-1">性能考虑 <a class="header-anchor" href="#性能考虑" aria-label="Permalink to &quot;性能考虑&quot;">​</a></h2><p>AgentChat系统在设计时考虑了性能优化。后端服务使用FastAPI框架，具有高性能的异步处理能力。Redis缓存用于存储会话数据和频繁访问的信息，减少数据库查询次数。MySQL数据库配置了健康检查，确保服务的可用性。前端使用Vue3和Vite，提供快速的页面加载和响应。</p><h2 id="故障排除指南" tabindex="-1">故障排除指南 <a class="header-anchor" href="#故障排除指南" aria-label="Permalink to &quot;故障排除指南&quot;">​</a></h2><p>当系统出现问题时，管理员可以按照以下步骤进行故障排除：</p><ol><li>使用<code>docker-compose ps</code>命令检查服务状态。</li><li>使用<code>docker-compose logs -f</code>命令查看实时日志。</li><li>检查环境变量配置是否正确。</li><li>确认端口没有被其他进程占用。</li><li>如果问题持续存在，可以尝试重启相关服务或重新构建容器。</li></ol><p><strong>本节来源</strong></p><ul><li><a href="https://github.com/Shy2593666979/AgentChat/docker/docker-compose.yml#L7-L125" target="_blank" rel="noreferrer">docker-compose.yml</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/docker/start.sh#L1-L52" target="_blank" rel="noreferrer">start.sh</a></li><li><a href="https://github.com/Shy2593666979/AgentChat/docker/stop.sh#L1-L35" target="_blank" rel="noreferrer">stop.sh</a></li></ul><h2 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h2><p>AgentChat系统通过Docker容器化部署，提供了易于管理和维护的微服务架构。通过本文档提供的运维指南，系统管理员可以有效地管理系统的启动、停止、监控和故障排除，确保服务的稳定运行。建议定期备份数据，监控系统性能，并及时更新系统以修复安全漏洞。</p><h2 id="附录" tabindex="-1">附录 <a class="header-anchor" href="#附录" aria-label="Permalink to &quot;附录&quot;">​</a></h2><h3 id="环境变量管理最佳实践" tabindex="-1">环境变量管理最佳实践 <a class="header-anchor" href="#环境变量管理最佳实践" aria-label="Permalink to &quot;环境变量管理最佳实践&quot;">​</a></h3><p>使用<code>.env</code>文件分离配置，避免将敏感信息硬编码在代码中。生产环境中应使用强密码和密钥，并定期轮换。可以使用Docker Secrets或外部配置管理工具来进一步增强安全性。</p><h3 id="备份与恢复策略" tabindex="-1">备份与恢复策略 <a class="header-anchor" href="#备份与恢复策略" aria-label="Permalink to &quot;备份与恢复策略&quot;">​</a></h3><p>定期备份MySQL数据卷和Redis持久化文件。可以使用<code>docker exec</code>命令进入容器执行数据库导出，或将数据卷挂载到主机进行备份。恢复时，将备份文件复制到相应位置并重启服务。</p><h3 id="版本更新与回滚" tabindex="-1">版本更新与回滚 <a class="header-anchor" href="#版本更新与回滚" aria-label="Permalink to &quot;版本更新与回滚&quot;">​</a></h3><p>进行版本更新时，先在测试环境中验证新版本的稳定性。更新时使用<code>docker-compose pull</code>命令拉取最新镜像，然后使用<code>docker-compose up -d</code>命令更新服务。如果新版本出现问题，可以使用<code>docker-compose down</code>和<code>docker-compose up -d</code>命令回滚到之前的版本。</p><h3 id="关键监控指标和告警阈值" tabindex="-1">关键监控指标和告警阈值 <a class="header-anchor" href="#关键监控指标和告警阈值" aria-label="Permalink to &quot;关键监控指标和告警阈值&quot;">​</a></h3><ul><li>CPU使用率：超过80%时告警</li><li>内存使用率：超过85%时告警</li><li>磁盘使用率：超过90%时告警</li><li>服务响应时间：超过1秒时告警</li><li>错误率：超过5%时告警</li></ul>`,62)])])}const E=a(l,[["render",t]]);export{k as __pageData,E as default};
